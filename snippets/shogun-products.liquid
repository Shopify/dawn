{% comment %}
Auto-generated by Shogun.
This file can be re-written at any time.
{% endcomment %}

{% assign handles = content.metafields.shogun.products | split: "," | slice: 0, 20 %}
{% if handles.size > 0 %}
  <script type="text/javascript">
    window.__shgProducts = window.__shgProducts || {};
    {% for handle in handles %}
      {% assign currentProduct = all_products[handle] %}
      {% if currentProduct != blank %}
        window.__shgProducts["{{handle}}"] = {{currentProduct | json }};
      {% endif %}
    {% endfor %}
  </script>
{% endif %}

{% if cart and cart.currency and cart.currency.iso_code %}
  <script type="text/javascript">
    {% if 'shopify' == 'shopify' %}
      window.__shgMoneyFormat = window.__shgMoneyFormat || {"USD":{"currency":"USD","currency_symbol":"$","currency_symbol_location":"left","decimal_places":2,"decimal_separator":".","thousands_separator":","}};
    {% endif %}
    window.__shgCurrentCurrencyCode = window.__shgCurrentCurrencyCode || {
      currency: "{{ cart.currency.iso_code }}",
      currency_symbol: "{{ cart.currency.symbol }}",
      decimal_separator: ".",
      thousands_separator: ",",
      decimal_places: 2,
      currency_symbol_location: "left"
    };
  </script>
{% endif %}

{%- assign collections_meta = content.metafields.shogun.collections.value -%}
{%- if collections_meta.size > 0 -%}
  <script type="text/javascript">
    window.__shgProducts = window.__shgProducts || {};
    window.__shgCategories = window.__shgCategories || {};
    {%- for collection_meta in collections_meta %}
      {%- assign collection = collections[collection_meta.handle] -%}
      window.__shgCategories["{{collection.handle}}"] = window.__shgCategories["{{collection.handle}}"] || {{ collection | json }};
      window.__shgCategories["{{collection.handle}}"].products = window.__shgCategories["{{collection.handle}}"].products || [];
      {%- paginate collection.products by collection_meta.count -%}
        {%- for product in collection.products %}
          window.__shgProducts["{{product.handle}}"] = window.__shgProducts["{{product.handle}}"] || {{ product | json }};

          if (!window.__shgCategories["{{collection.handle}}"].products.find(product => product.id == {{ product.id }})) {
            window.__shgCategories["{{collection.handle}}"].products.push(window.__shgProducts["{{product.handle}}"]);
          };
        {%- endfor -%}
      {%- endpaginate -%}
    {%- endfor %}
  </script>
{%- endif -%}
