{% comment %}
  Renders a custom megamenu component for mobile.
{% endcomment %}

{%- liquid
  assign by_artist = 'sections.header.custom_menu.by_artist' | t
  assign by_subject = 'sections.header.custom_menu.by_subject' | t
-%}

<details id="Details-menu-drawer-custom-wall-art">
  <summary
    id="HeaderDrawer-custom-wall-art"
    class="menu-drawer__menu-item link link--text focus-inset"
  >
    Wall Art
    <span class="svg-wrapper">
      {{- 'icon-arrow.svg' | inline_asset_content -}}
    </span>
    <span class="svg-wrapper">
      {{- 'icon-caret.svg' | inline_asset_content -}}
    </span>
  </summary>
  <div
    id="link-custom-wall-art"
    class="menu-drawer__submenu has-submenu gradient motion-reduce"
    tabindex="-1"
  >
    <div class="menu-drawer__inner-submenu">
      <button class="menu-drawer__close-button link link--text focus-inset" aria-expanded="true">
        <span class="svg-wrapper">
          {{- 'icon-arrow.svg' | inline_asset_content -}}
        </span>
        Wall Art
      </button>

      <!-- By Artist Section -->
      <details id="Details-menu-drawer-wall-art-artists">
        <summary class="menu-drawer__menu-item link link--text list-menu__item focus-inset">
          {{ by_artist }}
          <span class="svg-wrapper">
            {{- 'icon-arrow.svg' | inline_asset_content -}}
          </span>
        </summary>
        <div class="menu-drawer__submenu gradient motion-reduce">
          <button class="menu-drawer__close-button link link--text focus-inset" aria-expanded="true">
            <span class="svg-wrapper">
              {{- 'icon-arrow.svg' | inline_asset_content -}}
            </span>
            {{ by_artist }}
          </button>
          <ul class="menu-drawer__menu list-menu" role="list" tabindex="-1">
            {%- assign artist_count = 0 -%}
            {%- for collection in collections -%}
              {%- if collection.metafields.collection.is_nav == true
                and collection.metafields.collection.by_artist == true
              -%}
                {%- assign artist_count = artist_count | plus: 1 -%}
                {%- if artist_count <= 10 -%}
                  <li>
                    <a
                      href="{{ collection.url }}"
                      class="menu-drawer__menu-item link link--text list-menu__item focus-inset{% if collection.current %} menu-drawer__menu-item--active{% endif %}"
                      {% if collection.current %}
                        aria-current="page"
                      {% endif %}
                    >
                      {{ collection.title | escape }}
                    </a>
                  </li>
                {%- endif -%}
              {%- endif -%}
            {%- endfor -%}
            {%- if artist_count > 10 -%}
              <li>
                <a
                  href="/collections/artists"
                  class="menu-drawer__menu-item link link--text list-menu__item focus-inset"
                >
                  View All Artists
                  <span class="custom-menu-cta-count">{{ artist_count | minus: 10 }}+</span>
                </a>
              </li>
            {%- endif -%}
          </ul>
        </div>
      </details>

      <!-- By Subject Section -->
      <details id="Details-menu-drawer-wall-art-subjects">
        <summary class="menu-drawer__menu-item link link--text list-menu__item focus-inset">
          {{ by_subject }}
          <span class="svg-wrapper">
            {{- 'icon-arrow.svg' | inline_asset_content -}}
          </span>
        </summary>
        <div class="menu-drawer__submenu gradient motion-reduce">
          <button class="menu-drawer__close-button link link--text focus-inset" aria-expanded="true">
            <span class="svg-wrapper">
              {{- 'icon-arrow.svg' | inline_asset_content -}}
            </span>
            {{ by_subject }}
          </button>
          <ul class="menu-drawer__menu list-menu" role="list" tabindex="-1">
            {%- assign subject_count = 0 -%}
            {%- for collection in collections -%}
              {%- if collection.metafields.collection.is_nav == true
                and collection.metafields.collection.by_subject == true
              -%}
                {%- assign subject_count = subject_count | plus: 1 -%}
                {%- if subject_count <= 10 -%}
                  <li>
                    <a
                      href="{{ collection.url }}"
                      class="menu-drawer__menu-item link link--text list-menu__item focus-inset{% if collection.current %} menu-drawer__menu-item--active{% endif %}"
                      {% if collection.current %}
                        aria-current="page"
                      {% endif %}
                    >
                      {{ collection.title | escape }}
                    </a>
                  </li>
                {%- endif -%}
              {%- endif -%}
            {%- endfor -%}
            {%- if subject_count > 10 -%}
              <li>
                <a
                  href="/collections/subjects"
                  class="menu-drawer__menu-item link link--text list-menu__item focus-inset"
                >
                  View All Subjects
                  <span class="custom-menu-cta-count">{{ subject_count | minus: 10 }}+</span>
                </a>
              </li>
            {%- endif -%}
          </ul>
        </div>
      </details>

      <!-- Featured Collections -->
      <div class="menu-drawer__featured">
        <h3 class="menu-drawer__featured-title">Featured Collections</h3>
        <div class="menu-drawer__featured-grid">
          {%- for collection in collections -%}
            {%- if collection.metafields.collection.is_nav == true
              and collection.metafields.collection.is_featured == true
            -%}
              <div class="menu-drawer__featured-item">
                <a href="{{ collection.url }}" class="menu-drawer__featured-link">
                  {%- if collection.image -%}
                    <img
                      src="{{ collection.image | image_url: width: 200 }}"
                      alt="{{ collection.title | escape }}"
                      class="menu-drawer__featured-image"
                      loading="lazy"
                      width="200"
                      height="160"
                    >
                  {%- endif -%}
                  <span class="menu-drawer__featured-title">{{ collection.title | escape }}</span>
                </a>
              </div>
            {%- endif -%}
          {%- endfor -%}
        </div>
      </div>
    </div>
  </div>
</details>
