{% comment %}
  Renders a size chart modal.

  Accepts:
  - page_handle: {String} Handle for size chart page (default in site settings)

  Usage:
  {% render 'product-size-chart', page_handle: 'My-Handle'%}
{% endcomment %}

{%- if page_handle or settings.size_chart -%}
  <details-modal class="header__search">
    <details>
      <summary
        class="header__icon header__icon--search header__icon--summary link focus-inset modal__toggle"
        aria-haspopup="dialog"
        aria-label="{{ 'general.search.search' | t }}"
      >
        Size Chart
      </summary>
      <div
        class="search-modal modal__content gradient"
        role="dialog"
        aria-modal="true"
        aria-label="{{ 'general.search.search' | t }}"
      >
        <div class="modal-overlay"></div>
        <div
          class="search-modal__content{% if settings.inputs_shadow_vertical_offset != 0 and settings.inputs_shadow_vertical_offset < 0 %} search-modal__content-top{% else %} search-modal__content-bottom{% endif %}"
          tabindex="-1"
        >
          <div class="size-chart">
            <div class="modal__content">
              {% if product.metafields.custom_fields['custom-size-chart'] != blank %}
                {% assign page_ref = pages[product.metafields.custom_fields['custom-size-chart']] %}
                {{ page_ref.content }}
              {% else %}
                {{ pages[settings.size_chart].content }}
              {% endif %}
            </div>
          </div>

          <button
            type="button"
            class="search-modal__close-button modal__close-button link link--text focus-inset"
            aria-label="{{ 'accessibility.close' | t }}"
          >
            <svg class="icon icon-close" aria-hidden="true" focusable="false">
              <use href="#icon-close">
            </svg>
          </button>
        </div>
      </div>
    </details>
  </details-modal>
{%- endif -%}
