{% assign updated = '2023/10/16' %}
{% assign app_type = 'snippet' %}

{%capture skip_cart_only%}{%assign metafields = shop.metafields.zipifyoneclickupsell%}{%for metafield in metafields%}{%if metafield.first == 'general'%}{%assign general = metafield.last | split: ','%}{%for fields in general%}{%assign field = fields | split: '{'%}{%assign field = field | remove: '}'%}{%if field contains '\"skip_cart\":\"true\"'%}{{true}} {%endif%}{%endfor%}{%endif%}{%endfor%}{%endcapture%}{%assign skip_cart_only = skip_cart_only | strip%}{%if skip_cart_only%}{%assign app_disabled = false%}{%endif%} 
{% if app_disabled %}
{%assign app_disabled = true%}{%unless allowed_templates.size%}{%assign allowed_templates = 'all_templates'%}{%assign excluded_templates = 'register,account,login,reset_password,search,article,""'%}{%unless allowed_templates.size%}{%assign allowed_templates = 'all_templates'%}{%endunless%}{%endunless%}{%assign allowed_templates = allowed_templates | split: ','%}{%assign excluded_templates = excluded_templates | split: ','%}{%if allowed_templates contains 'all_templates' or allowed_templates contains template.name%}{%unless excluded_templates contains template.name%}{%assign app_disabled = false%}{%endunless%}{%endif%} 
{% endif %}
{%capture check_app_state%}{%assign metafields = shop.metafields.zipifyoneclickupsell%}{%assign disabled = true%}{%assign source_disabled = true%}{%for metafield in metafields%}{%if metafield.first == 'general'%}{%assign general = metafield.last | split: ','%}{%for fields in general%}{%if fields contains 'zipify-oneclickupsell'%}{%if fields contains 'true'%}{%assign disabled = false%}{%assign skip_cart_only = false%}{%endif%}{%endif%}{%if fields contains 'snippet_source'%}{%assign field = fields | split: ':'%}{%assign field = field | last%}{%if field contains app_type%}{%assign source_disabled = false%}{%endif%}{%endif%}{%endfor%}{%endif%}{%endfor%}{%endcapture%}{{check_app_state}} {%assign app_disabled = disabled%}{%unless disabled%}{% assign app_disabled = source_disabled%}{%endunless%}{%if app_disabled and skip_cart_only != blank%}{%assign app_disabled = false%}{%endif%} 

{% unless oneclickupsellapp or app_disabled %}
{%capture upsell_cart_includes%} {%assign upsellapp_proxy_url = shop.metafields.zipifyoneclickupsell.general.settings.proxy_url%}{%assign skip_cart = shop.metafields.zipifyoneclickupsell.general.integrations.skip_cart%}{%unless skip_cart == 'true'%}{%assign skip_cart = 'false'%}{%endunless%}{%if shop.metafields.subscriptions.subscription_active == 'true'%}{%assign subscription_app_enabled = 'true'%}{%assign integrate_with_recharge = 'false'%}{%else%}{%assign subscription_app_enabled = 'false'%}{%endif%}{%assign product_tags = '' | split: ','%}{%assign subscription_products = '' | split: ','%}{%assign subscription_variants = '' | split: ','%}{%assign cart_products = '' | split: ','%}{%assign all_cart_collections = '' | split: ','%}{%assign customer_id = '"' | append: customer.id | append: '"'%}{%assign needed_product_fields_names = 'id,title,handle,featured_image,tags,vendor,type,published_at' | split: ','%}{%assign needed_variant_fields_names = 'id,title,price,price_min,price_max,price_varies,taxable,weight,requires_shipping,inventory_policy,inventory_quantity,inventory_management,sku,compare_at_price,compare_at_price_varies,compare_at_price_min,compare_at_price_max,images,options,content' | split: ','%}{%assign needed_collection_fields_names = 'id,title,handle' | split: ','%}{%for cart_item in cart.items%}{%if cart_item.product%}{%assign upsell_item_product = cart_item.product%}{%else%}{%assign upsell_item_product = cart_item%}{%endif%}{%assign product_variants_json_list = '' | split: ','%}{%for product_variant in upsell_item_product.variants%}{%assign product_variant_json = '' | split: ','%}{%for variant_field_name in needed_variant_fields_names%}{%assign variant_field_value = product_variant[variant_field_name] | json%}{%assign variant_field_json = '"' | append: variant_field_name | append: '":' | append: variant_field_value | split: '---upsellapp_separator---'%}{%assign product_variant_json = product_variant_json | concat: variant_field_json%}{%endfor%}{%assign product_variant_json = product_variant_json | join: ',' | prepend: '{' | append: '}' | split: '---upsellapp_separator---'%}{%assign product_variants_json_list = product_variants_json_list | concat: product_variant_json%}{%endfor%}{%assign product_variants_json_list = product_variants_json_list | join: ',' | prepend: '[' | append: ']'%}{%assign product_json = '' | split: ','%}{%for product_field_name in needed_product_fields_names%}{%assign product_field_value = upsell_item_product[product_field_name] | json%}{%assign product_field_json = '"' | append: product_field_name | append: '":' | append: product_field_value | split: '---upsellapp_separator---'%}{%assign product_json = product_json | concat: product_field_json%}{%endfor%}{%assign product_field_name = 'collection_ids'%}{%assign product_field_value = upsell_item_product.collections | map: 'id' | join: ',' | json%}{%assign product_field_json = '"' | append: product_field_name | append: '":' | append: product_field_value | split: '---upsellapp_separator---'%}{%assign product_json = product_json | concat: product_field_json%}{%assign product_field_name = 'variants'%}{%assign product_field_json = '"' | append: product_field_name | append: '":' | append: product_variants_json_list | split: '---upsellapp_separator---'%}{%assign product_json = product_json | concat: product_field_json%}{%assign product_json = product_json | join: ',' | prepend: '{' | append: '}' | split: '---upsellapp_separator---'%}{%assign product_tags = product_tags | concat: upsell_item_product.tags%}{%assign cart_products = cart_products | concat: product_json%}{%assign all_cart_collections = all_cart_collections | concat: upsell_item_product.collections%}{%if cart_item.product%}{%assign cart_item_id = '' | append: cart_item.id%}{%if subscription_app_enabled%}{%for p in cart_item.properties%}{%if p.first == 'shipping_interval_frequency'%}{%assign subscription_product = all_products[upsell_item_product.metafields.subscriptions.original_handle]%}{%if subscription_product%}{%assign product_tags = product_tags | concat: subscription_product.tags%}{%assign product_field_name = 'collection_ids'%}{%assign product_field_value = subscription_product.collections | map: 'id' | join: ',' | json%}{%assign product_field_json = '"' | append: product_field_name | append: '":' | append: product_field_value%}{%assign subscription_product_json = subscription_product | json%}{%assign size = subscription_product_json | size | minus: 1%}{%assign subscription_product_json = subscription_product_json | slice: 0, size | append: ',' | append: product_field_json | append: '}'%}{%assign subscription_product_json = subscription_product_json | split: '---upsellapp_separator---'%}{%assign cart_products = cart_products | concat: subscription_product_json%}{%for subscription_variant in subscription_product.variants%}{%if subscription_variant.metafields.subscriptions.discount_variant_id == cart_item_id%}{%assign subscription_variants = subscription_variants | concat: subscription_variant_relation%}{%assign subscription_product_relation = cart_item.product_id | append: '_' | append: subscription_product.id | split: ','%}{%assign subscription_products = subscription_products | concat: subscription_product_relation%}{%assign subscription_products_tags = subscription_products_tags | append: cart_item.variant_id | append: '_' | append: subscription_product.tags | join: ',' | append: ';'%}{%endif%}{%endfor%}{%endif%}{%endif%}{%endfor%}{%endif%}{%else%}{%if subscription_app_enabled and product.metafields.subscriptions.subscription_id%}{%assign subscription_product_relation = product.metafields.subscriptions.discount_product_id | append: '_' | append: product.id | split: ','%}{%assign subscription_products = subscription_products | concat: subscription_product_relation%}{%endif%}{%endif%}{%endfor%}{%if template.name == 'product'%}{%assign product_id_size = '' | append: product.id | strip | size%}{%if product_id_size > 0%}{%if cart_item.product%}{%assign upsell_item_product = cart_item.product%}{%else%}{%assign upsell_item_product = cart_item%}{%endif%}{%assign product_variants_json_list = '' | split: ','%}{%for product_variant in upsell_item_product.variants%}{%assign product_variant_json = '' | split: ','%}{%for variant_field_name in needed_variant_fields_names%}{%assign variant_field_value = product_variant[variant_field_name] | json%}{%assign variant_field_json = '"' | append: variant_field_name | append: '":' | append: variant_field_value | split: '---upsellapp_separator---'%}{%assign product_variant_json = product_variant_json | concat: variant_field_json%}{%endfor%}{%assign product_variant_json = product_variant_json | join: ',' | prepend: '{' | append: '}' | split: '---upsellapp_separator---'%}{%assign product_variants_json_list = product_variants_json_list | concat: product_variant_json%}{%endfor%}{%assign product_variants_json_list = product_variants_json_list | join: ',' | prepend: '[' | append: ']'%}{%assign product_json = '' | split: ','%}{%for product_field_name in needed_product_fields_names%}{%assign product_field_value = upsell_item_product[product_field_name] | json%}{%assign product_field_json = '"' | append: product_field_name | append: '":' | append: product_field_value | split: '---upsellapp_separator---'%}{%assign product_json = product_json | concat: product_field_json%}{%endfor%}{%assign product_field_name = 'collection_ids'%}{%assign product_field_value = upsell_item_product.collections | map: 'id' | join: ',' | json%}{%assign product_field_json = '"' | append: product_field_name | append: '":' | append: product_field_value | split: '---upsellapp_separator---'%}{%assign product_json = product_json | concat: product_field_json%}{%assign product_field_name = 'variants'%}{%assign product_field_json = '"' | append: product_field_name | append: '":' | append: product_variants_json_list | split: '---upsellapp_separator---'%}{%assign product_json = product_json | concat: product_field_json%}{%assign product_json = product_json | join: ',' | prepend: '{' | append: '}' | split: '---upsellapp_separator---'%}{%assign product_tags = product_tags | concat: upsell_item_product.tags%}{%assign cart_products = cart_products | concat: product_json%}{%assign all_cart_collections = all_cart_collections | concat: upsell_item_product.collections%}{%if cart_item.product%}{%assign cart_item_id = '' | append: cart_item.id%}{%if subscription_app_enabled%}{%for p in cart_item.properties%}{%if p.first == 'shipping_interval_frequency'%}{%assign subscription_product = all_products[upsell_item_product.metafields.subscriptions.original_handle]%}{%if subscription_product%}{%assign product_tags = product_tags | concat: subscription_product.tags%}{%assign product_field_name = 'collection_ids'%}{%assign product_field_value = subscription_product.collections | map: 'id' | join: ',' | json%}{%assign product_field_json = '"' | append: product_field_name | append: '":' | append: product_field_value%}{%assign subscription_product_json = subscription_product | json%}{%assign size = subscription_product_json | size | minus: 1%}{%assign subscription_product_json = subscription_product_json | slice: 0, size | append: ',' | append: product_field_json | append: '}'%}{%assign subscription_product_json = subscription_product_json | split: '---upsellapp_separator---'%}{%assign cart_products = cart_products | concat: subscription_product_json%}{%for subscription_variant in subscription_product.variants%}{%if subscription_variant.metafields.subscriptions.discount_variant_id == cart_item_id%}{%assign subscription_variants = subscription_variants | concat: subscription_variant_relation%}{%assign subscription_product_relation = cart_item.product_id | append: '_' | append: subscription_product.id | split: ','%}{%assign subscription_products = subscription_products | concat: subscription_product_relation%}{%assign subscription_products_tags = subscription_products_tags | append: cart_item.variant_id | append: '_' | append: subscription_product.tags | join: ',' | append: ';'%}{%endif%}{%endfor%}{%endif%}{%endif%}{%endfor%}{%endif%}{%else%}{%if subscription_app_enabled and product.metafields.subscriptions.subscription_id%}{%assign subscription_product_relation = product.metafields.subscriptions.discount_product_id | append: '_' | append: product.id | split: ','%}{%assign subscription_products = subscription_products | concat: subscription_product_relation%}{%endif%}{%endif%}{%endif%}{%endif%}{%assign cart_collections = '' | split: ','%}{%for cart_collection in all_cart_collections%}{%assign cart_collection_json = '' | split: ','%}{%for collection_field_name in needed_collection_fields_names%}{%assign collection_field_value = cart_collection[collection_field_name] | json%}{%assign collection_field_json = '"' | append: collection_field_name | append: '":' | append: collection_field_value | split: '---upsellapp_separator---'%}{%assign cart_collection_json = cart_collection_json | concat: collection_field_json%}{%endfor%}{%assign collection_rules_size = cart_collection | json | split: '"rules":' | size%}{%assign collection_field_name = 'collection_type'%}{%assign collection_field_value = 'custom' | json%}{%if collection_rules_size > 1%}{%assign collection_field_value = 'smart' | json%}{%endif%}{%assign collection_field_json = '"' | append: collection_field_name | append: '":' | append: collection_field_value | split: '---upsellapp_separator---'%}{%assign cart_collection_json = cart_collection_json | concat: collection_field_json%}{%assign cart_collection_json = cart_collection_json | join: ',' | prepend: '{' | append: '}' | split: '---upsellapp_separator---'%}{%assign cart_collections = cart_collections | concat: cart_collection_json%}{%endfor%}{%assign product_tags = product_tags | uniq%}{%assign upsell_cart_include_subscription_upsells = 'false'%}{%assign upsell_cart_include_upsells = 'false'%}{%assign disabled_by_subscription_app = 'false'%}{%if subscription_app_enabled and subscription_products.size > 0 and integrate_with_recharge != 'true'%}{%assign disabled_by_subscription_app = 'true'%}{%endif%}{%if subscription_app_enabled and subscription_variants.size > 0%}{%if integrate_with_recharge != 'true'%}{%assign disabled_by_subscription_app = 'true'%}{%endif%}{%endif%}{%for tag_raw in product_tags%}{%assign tag = tag_raw | downcase%}{%if upsellapp_tags contains tag%}{%assign upsell_cart_include_subscription_upsells = 'true'%}{%endif%}{%endfor%}{%assign subscription_products_json = subscription_products | uniq | join: ','%}{%assign cart_products_json = cart_products | uniq | join: ','%}{%assign cart_collections_json = cart_collections | uniq | join: ','%}{%assign cart_variants_json = ''%}{%for item in cart.items%}{%assign cart_item = item | json | append: ','%}{%assign cart_variants_json = cart_variants_json | append: cart_item%}{%endfor%}{%if subscription_products_tags.size > 0%}{%assign is_precheckout = true%}{%endif%}{%assign needed_cart_items_fields = 'product_id,variant_id,quantity,grams,price,line_price,title,properties,vendor,sku' | split: ','%}{%for cart_item in cart.items%}{%assign cart_items_json = '' | split: ','%}{%for cart_item_field_name in needed_cart_items_fields%}{%assign cart_item_field_value = cart_item[cart_item_field_name] | json%}{%assign cart_item_field_json = '"' | append: cart_item_field_name | append: '":' | append: cart_item_field_value | split: '---upsellapp_separator---'%}{%assign cart_items_json = cart_items_json | concat: cart_item_field_json%}{%endfor%}{%assign cart_items_json = cart_items_json | join: ',' | prepend: '{' | append: '}' | split: '---upsellapp_separator---'%}{%assign cart_items_json_list = cart_items_json_list | concat: cart_items_json%}{%endfor%}{%assign cart_items_json_list = cart_items_json_list | join: ',' | prepend: '[' | append: ']'%}{%assign cart_json = cart | json%}{%assign root_url = routes.root_url%}{%assign customer_tags = customer.tags | sort | split: ' '%} {%endcapture%}{%capture main_metafields%}{ {%for field in shop.metafields.zipifyoneclickupsell%}{{field.first }}: {{field.last}}, {%endfor%} } {%endcapture%} 
<script> !(function () { if (window.OCUIncart) return; window.Zipify = window.Zipify || {}; window.OCUApi = window.OCUApi || {}; Zipify.OCU = { api: OCUApi }; })() </script>{%capture extend_snippet%}{%render 'oneclickupsellapp-extend'%}{%endcapture%}{%unless extend_snippet contains "Liquid error"%}{{extend_snippet}} {%endunless%} 
<style>.ocu-hidden.ocu-hidden.ocu-hidden,.bold_hidden.bold_hidden.bold_hidden{display:none !important}</style>
<script>
!function(){
if (window.OCUIncart) return;const loopReturns=JSON.parse(localStorage.getItem('loop-onstore-data'));if (loopReturns && loopReturns.active) return;
const _excluded=["token"];function _objectWithoutProperties(t,e){if(null==t)return{};var i,n=_objectWithoutPropertiesLoose(t,e);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(t),o=0;o<r.length;o++)i=r[o],0<=e.indexOf(i)||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i]);return n}function _objectWithoutPropertiesLoose(t,e){if(null==t)return{};for(var i,n={},r=Object.keys(t),o=0;o<r.length;o++)i=r[o],0<=e.indexOf(i)||(n[i]=t[i]);return n}function ownKeys(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(i),!0).forEach(function(t){_defineProperty(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function _defineProperty(t,e,i){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);e=i.call(t,e||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}const ocuCdn="https://d1u9wuqimc88kc.cloudfront.net",APP_HOST="https://ocu.zipify.com";if(Zipify.OCU.api.loaded=Zipify.OCU.api.loaded||{},Zipify.OCU.loadScriptTags=function(){OCU_SCRIPT_TAGS=Zipify.OCU.lqd.scripts,OCU_SCRIPT_TAGS.forEach(t=>{const e=document.createElement("script");Zipify.OCU.api.loaded[t]=!0,e.src=`https://d1npnstlfekkfz.cloudfront.net/${t}.js`,e.defer=!0,document.head.append(e)})},window.performance){const M=window.performance.getEntriesByType&&window.performance.getEntriesByType("navigation"),N=()=>{window.OCUApi&&!OCUApi.preventReloadOnNavigate&&location.reload()};(M&&0<M.length&&"back_forward"===M[0].type||window.performance.navigation&&window.performance.navigation.type===window.performance.navigation.TYPE_BACK_FORWARD)&&N()}!function(){var t,e=[];window.Promise||e.push("Promise"),window.URLSearchParams||e.push("URL"),Element.prototype.closest||e.push("Element.prototype.closest"),Array.from||e.push("Array.from"),Object.assign||e.push("Object.assign"),Object.entries||e.push("Object.entries"),Object.values||e.push("Object.values"),Array.prototype.includes||e.push("Array.prototype.includes");try{new Event("event")}catch(t){e.push("Event")}try{Symbol}catch(t){e.push("Symbol")}e.length&&((t=document.createElement("script")).src="https://cdn.polyfill.io/v3/polyfill.min.js?features="+e.join(",")+"&flags=gated",t.async=!0,document.head.appendChild(t)),Object.setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t}}();var ajax,originalURLSearchParams=URLSearchParams,utils={store:Object.freeze(new Store),cookie:{options:{expires:86400,path:"/",encodeValue:!1},get:function(t){t=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},set:function(t,e,i){var n,r=(i=i||this.options).expires;"number"==typeof r&&r&&((n=new Date).setTime(n.getTime()+1e3*r),r=i.expires=n),r&&r.toUTCString&&(i.expires=r.toUTCString());var o,s=t+"="+(e=encodeURIComponent(e));for(o in i){s+="; "+o;var c=i[o];!0!==c&&(s+="="+c)}document.cookie=s},remove:function(t){this.set(t,null,{expires:-1})}},queryParams:function(t){var i={};return t.replace("?","").split("&").forEach(function(t){var e=t.split("=")[0],t=t.split("=")[1];i[e]=decodeURIComponent(t)}),i},shareableDiscount:function(t){t=t||{};var e=utils.queryParams(location.search)[t.key||"discount"];e&&(utils.cookie.set(t.name||"ocu-share-discount",e,utils.cookie.options),t.clear&&history.pushState(null,null,location.href.replace(/\?.+/,"")))},serializeForm:function(t){return new originalURLSearchParams(new FormData(t).fd||new FormData(t)).toString()},serializeFormEdge:function(t){var e,n=[];if("object"==typeof t&&"FORM"==t.nodeName){var r=t.elements.length;for(i=0;i<r;i++)if((e=t.elements[i]).name&&!e.disabled&&"file"!=e.type&&"reset"!=e.type&&"submit"!=e.type&&"button"!=e.type)if("select-multiple"==e.type)for(j=t.elements[i].options.length-1;0<=j;j--)e.options[j].selected&&(n[n.length]=encodeURIComponent(e.name)+"="+encodeURIComponent(e.options[j].value));else("checkbox"!=e.type&&"radio"!=e.type||e.checked)&&(n[n.length]=encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}return n.join("&").replace(/%20/g,"+")},serialize:function(n,r,o,s){return this.helpers.isFormData(r)&&(s=o,o=r,r=null),(r=r||{}).indices=r.indices||!1,o=o||new originalURLSearchParams,this.helpers.isUndefined(n)||(this.helpers.isNull(n)?o.append(s,""):this.helpers.isArray(n)?n.length?n.forEach(function(t,e){e=s+"["+(r.indices&&"object"==typeof t?e:"")+"]";this.serialize(t,r,o,e)}.bind(this)):(t=s+"[]",o.append(t,"")):this.helpers.isDate(n)?o.append(s,n.toISOString()):!this.helpers.isObject(n)||this.helpers.isFile(n)||this.helpers.isBlob(n)?o.append(s,n):Object.keys(n).forEach(function(t){var e=n[t];if(this.helpers.isArray(e))for(;2<t.length&&t.lastIndexOf("[]")===t.length-2;)t=t.substring(0,t.length-2);var i=s?s+"["+t+"]":t;this.serialize(e,r,o,i)}.bind(this))),o;var t},inArray:function(t,e,i){return t.some(function(t){return t[e]===i})},filterObject:function(i,t){return t.reduce(function(t,e){return t[e]=i[e],t},{})},helpers:{isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isObject:function(t){return t===Object(t)},isArray:function(t){return Array.isArray(t)},isDate:function(t){return t instanceof Date},isBlob:function(t){return t&&"number"==typeof t.size&&"string"==typeof t.type&&"function"==typeof t.slice},isFile:function(t){return this.isBlob(t)&&("object"==typeof t.lastModifiedDate||"number"==typeof t.lastModified)&&"string"==typeof t.name},isFormData:function(t){return t instanceof FormData}}};Zipify.OCU.PrecheckoutIntegrations=function(t){this.cartItems=t},window.OCUIncart=window.OCUIncart||{},window.OCUIncart.integrations=t=>new Zipify.OCU.PrecheckoutIntegrations(t),Zipify.OCU.PrecheckoutIntegrations.prototype={get advancedProductOptions(){const t=this.cartItems;return{get present(){return!!window.mwProductOptions},get relations(){return t.reduce(function(t,e){return e.properties&&e.properties._mw_option_relation&&t.push(+e.properties._mw_option_relation.split("_")[0]),t},[])}}},get zapiet(){return{get present(){return!(!window.Zapiet||!document.querySelector("#storePickupApp"))},get params(){var t=Zapiet.Cart&&Zapiet.Cart.getUrlParams()||{};return Object.entries(t).reduce(function(t,e){if(/^\s*$/.test(e[1]))return t;const i={};return i[e[0]]=e[1],t.push(i),t},[])},merge:function(t){return(t||[]).concat(this.params)}}},get simpleInStorePickup(){return{get present(){var t=document.querySelector("#in-store-pick-up");return t&&t.checked},get params(){const t=document.querySelector('form[action^="/cart"]');if(!t)return[];const e=t.action.split(/\?|&/),i=e.slice(7).slice(0,3);var n=e.slice(-6);const r=i.concat(n);return r.reduce(function(t,e){e=e.split("=");const i={};return i[e[0]]=decodeURIComponent(e[1]),t.push(i),t},[])},merge:function(t){return(t||[]).concat(this.params)}}},get weglot(){return{get present(){return!!window.Weglot},get params(){return[{locale:window.Weglot.getCurrentLang()}]},merge:function(t){return(t||[]).concat(this.params)}}},get bt(){return{get present(){return!(!window.BT||!window.$)},get addToCartBtn(){return document.querySelector('button[name="add"]')},startLoadingBtn:function(){BT.startLoadingBtn($(this.addToCartBtn))},endLoadingBtn:function(){BT.endLoadingBtn($(this.addToCartBtn))}}},get exemptify(){return{get present(){var t=document.querySelector('[name="checkout-exemptify"]'),e=document.querySelectorAll("[data-ocu-checkout]");return!!t&&1<e.length}}},get tidio(){return{stateStorageKey:null,selector:{main:'script[src*="code.tidio.co"]',fallback:'script[src*="code.tidio"],script[src*="code"][src*="tidio"],script[src*="uploads/redirect"][src*="tidio"]'},get present(){return!!window.tidioChatApi},get storageKey(){return this.stateStorageKey||(this.stateStorageKey="tidio_state_"+(this.publickey||"preview"))},get publickey(){let t=document.querySelector(this.selector.main);t=t||document.querySelector(this.selector.fallback);var e=/([a-z0-9]+)(\.js|$)/g.exec(t.src);if(e&&32===e[1].length)return e[1]},saveKeyToStorage:function(t,e){e=JSON.stringify(e);localStorage.setItem(this.storageKey+"_"+t,e)},trackEvent:function(t,e){window.tidioChatApi.track("shopify."+t,{},e||function(){})},track:function(){try{this.saveKeyToStorage("goToCheckout",!0),this.trackEvent("go_to_checkout")}catch(t){console.log("tidio integration error",t.message)}}}},get buttonLoading(){return{idTheme:null,typeButton:null,typeElement:null,context:null,init(t){this.idTheme=this.supportTheme;const e=t.querySelector('[name="add"], [name="checkout"]')||t;this.typeButton=e.getAttribute("name")},get present(){return!(!window.hasOwnProperty("Shopify")||void 0===window.Shopify||Shopify.theme.id!==this.idTheme)},get buttonSelector(){return{checkout:'button[name="checkout"]',add:'button[name="add"]'}[this.typeButton]},get supportTheme(){const t=[120471879906],e=[120430788673];if(-1!==t.indexOf(Shopify.theme.id)){this.typeElement="class";var i=t.indexOf(Shopify.theme.id);return t[i]}if(-1!==e.indexOf(Shopify.theme.id)){this.typeElement="element";i=e.indexOf(Shopify.theme.id);return e[i]}},get buttonElements(){return document.querySelectorAll(this.buttonSelector)},get checkCondition(){return this.present&&0<this.buttonElements.length},get loaderSelector(){return{120471879906:"btn--loading"}[this.idTheme]},get loaderElement(){return{120430788673:'<i class="fa fa-spinner fa-spin"></i>'}[this.idTheme]},startingLoadingAction(){var t;null===(t={class:this.addingClasses,element:this.insertElements}[this.typeElement])||void 0===t||t.call(this)},endingLoadingAction(){var t;null===(t={class:this.deletingClasses,element:this.deleteElements}[this.typeElement])||void 0===t||t.call(this)},addingClasses(){this.buttonElements.forEach(t=>{t.setAttribute("disabled","disabled"),t.classList.add(this.loaderSelector)})},deletingClasses(){this.buttonElements.forEach(t=>{t.classList.remove(this.loaderSelector),t.removeAttribute("disabled")})},insertElements(){this.buttonElements.forEach(t=>{t.insertAdjacentHTML("beforeend",this.loaderElement)})},deleteElements(){this.buttonElements.forEach(t=>{t.removeChild(t.lastChild)})},startLoadingButton(){this.checkCondition&&this.startingLoadingAction()},endLoadingButton(){this.checkCondition&&this.endingLoadingAction()}}},get salesRocket(){return{get present(){return!!window.SalesRocket},setup:function(){if(this.present&&!utils.store.get("salesRocketIntegrationApplied"))try{document.querySelector(".ws-cs-checkout-btn").setAttribute("name","checkout"),utils.store.set("salesRocketIntegrationApplied",!0)}catch(t){console.error("salesRocketIntegrationError",t),utils.store.set("salesRocketIntegrationApplied",!1)}}}},get bundlerBuilder(){return{selector:"/apps/bundles",get bundleBuilderInput(){return document.querySelector("#bb_proxy_prefix")},get present(){return this.bundleBuilderInput&&this.bundleBuilderInput.value===this.selector&&this.bundlerForm&&!!this.bundlerForm.querySelector(`[formaction="${this.selector}/cart"]`)},get bundlerForm(){return this.bundleBuilderInput.closest(`form[action*="${this.selector}"]`)},submit(){this.bundlerForm.submit()}}},get minMaxify(){return{get present(){return!!window.minMaxify},get isFunction(){return minMaxify.checkLimits instanceof Function},get invalid(){return this.present&&this.isFunction&&!minMaxify.checkLimits()}}},get navidiumShippingProtection(){return{get checked(){var t;return null===(t=document.querySelector("#shippingProtectionCheckBox"))||void 0===t?void 0:t.checked},get callbackExist(){return"function"==typeof addProtection},checkTriggers:function(t){t=t.target;const e=Array.from(document.querySelectorAll('.nvd-checkout, .nvd-checkout *, [name="checkout"]'));return e.includes(t)},setup:async function(t){var e;this.checked&&this.checkTriggers(t)&&(t.preventDefault(),t.stopImmediatePropagation(),e=localStorage.getItem("nvdVariant"),this.callbackExist&&await(null!==(t=OCUApi.navidiumAddProtection)&&void 0!==t?t:addProtection)(e))}}}},window.OCUApi||(window.OCUApi={customCheckoutButton:null,customBuyNowButton:null,customAddToCartButton:null,customAddToCartEvent:null,customAddToCartEventHandler:null,customAddToCartForm:null,customAddToCartFetch:null,customButtonLoader:null,customCheckoutForm:null,customCheckoutDuplicatedForm:null,getCustomAddToCartData:null,preventReloadOnNavigate:!1,preventReloadPersistedPage:!1,customLineItemAttributes:null,excludeActionButton:null,excludeUpdateElement:null,originFetch:null,customCartDrawerCloseButton:null,axios:null,customQuantityInput:null,refreshCart:null,isWindowLocationForClickListener:null,listenFormEvents:null,isFormInvalid:!1,customFormValidate:null,callbackBeforeRedirect:null,callbackAfterNativeClick:null,cartDiscountSelectors:null,forceRenderDiscounts:null,dualPricing:null,customRechargeUrl:null,productLocationOnly:!1,isButtonDisabledAfterClick:!1,fireAddToCartEvent:null,preventEventBeforeNativeClick:!1,enableCollectionLocation:!1,enableCustomPages:null,customPageName:null,beforeCreate:null,product:null,cart:null,shopPayDraftOrder:!1,navidiumAddProtection:null,moneyFormat:null,customSkipCart:!1,customAllowUpsellsValidation:null,preventRestoreXMLHttp:!1,customUpdateCart:null,customShippingInsurance:{enabled:!1,price:0}}),OCUApi.store=utils.store,OCUApi.documentationReference="https://github.com/ZipifyApps/ocu/wiki/Public-API",OCUApi.customCheckoutButton&&(OCUApi.customCheckoutButton=`, ${OCUApi.customCheckoutButton}`),OCUApi.customQuantityInput&&(OCUApi.customQuantityInput=`, ${OCUApi.customQuantityInput}`),OCUApi.callbackBeforeRedirect||(OCUApi.callbackBeforeRedirect=()=>Promise.resolve({}));const FALSE_REDIRECT={redirect_url:null};function PopupDispatcher(){}window.OCUApi=Object.assign(OCUApi,{showUpsell:function(o){const s=this.context.popupDispatcher,c=this.context;return s.context=this.context,s.target=o.form,new Promise((e,t)=>{function i(t){s._upsellAppInstance()&&s._upsellAppInstance().hide(),c.integrations.zipifyPages.clear(),e((t=t.detail.response||FALSE_REDIRECT,_objectSpread({skip_cart:lqd.skip_cart},t)))}var{blockId:n,products:r}=o;return this.context.integrations.zipifyPages.setProducts(r),this.context.integrations.zipifyPages.setBlockId(n),this.context.integrations.zipifyPages.isBlockOutsideProductPage()?this.context.integrations.zipifyPages.handleZPOutsidePage(this.context,i):s.isProductAction?(s.listenCustomEvent(i),void s._show(null,!0)):(c.integrations.zipifyPages.clear(),e(FALSE_REDIRECT))})},getProductPageWidgetConfig:async function(t){var e=window.OCUIncart&&OCUIncart.appEndpoint,i={"Content-Type":"application/json","Shop-Domain":lqd.permanent_domain};Zipify.OCU.api.context.popupDispatcher.context=Zipify.OCU.api.context,await Zipify.OCU.api.context.popupDispatcher.verifyToken(),await Zipify.OCU.api.context.cart.createToken();const n=lqd.product,r=+new URLSearchParams(location.search).get("variant")||(null===n||void 0===n?void 0:n.variants[0].id),o=null===n||void 0===n?void 0:n.variants.find(t=>t.id===r&&t.available);var s=o||n;if(!s||!s.available)return{data:{error:"Unavaliable product"}};var c=n.options.map((t,e)=>({name:t,value:o.options[e]}));let a={variant_id:r,product_id:n.id,price:s.price,handle:n.handle,title:n.title,quantity:1,is_product_location:!0,options_with_values:c};(n.available||o)&&!Number.isNaN(r)||(a=null);const u=t.getCartItems((this.actualCart||lqd.cart).items).line_items;a&&u.push(a);t={line_items:u,cart_token:lqd.cart.token||utils.cookie.get("cart"),customer_tags:lqd.customer_tags||[],currency:t.currencyRate(),location:"product",customer_location:null===(t=OCUIncart.customer_location)||void 0===t?void 0:t.handle,snippet_version:OCUIncart.version,appropriate_type:"on_page_1"};try{return OCUApi.axios.post(e+"/product_page/v1/offers/appropriate",t,{headers:i})}catch(t){return console.log(t),t}},initialize:function(t){this.context=t.context},onAccept:function(){},onDecline:function(){},onPopupIsNotShown:function(){}}),PopupDispatcher.prototype={proceed:function(t,e,i){this.context=i,this.target=e,this.event=t,this.appropriateResponse=null,this.actualCart=null,this.listenCustomEvent(),this.bt=OCUIncart.integrations().bt,this.isBuyNow=i.helpers.isBuyNow(t),this.shopPayInstallments=i.helpers.isShopPayInstallments(t),this.buttonLoading=this._initButtonLoading(),this.buttonLoading.init(e),this._startLoading();i=this.isProductLocationOption(e)&&"cart"===lqd.template_name;return OCUIncart._is_product_action=this.isProductAction,(!t.isTrusted&&this.secondAttempt||i||this.context.helpers.isDisabledButton(this.event.target)||this.context.helpers.termsOfServiceConfirmation(this.event.target))&&!this.ignoreTrust?this._clearFlow():this.isProductLocationOption(e)?this.productLocation(t,e):(this.context.prevent(t,"immediate"),OCUApi.customButtonLoader&&OCUApi.customButtonLoader(this.event),this.check(t,e))},check:function(i,n){const r=this.context;return r.cart.get().then(r.cart.update).then(function(t){OCUIncart.cart_items=t.data.items||t.data.cart.items,lqd.cart=t.data.items?t.data:t.data.cart;try{var e=r.helpers.isSubscriptionProductInCart(lqd.cart);if(e&&this.isProductAction)return this.nativeClick();if(e)return r.integrations[e].redirect(i,lqd.cart)}catch(t){return this.checkout()}if(!utils.cookie.get("ocu_shown_popup"))return this.show(i,n);this.checkout()}.bind(this)).catch(this.checkout.bind(this))},show:function(t,e){if(this.context.prevent(t),utils.store.get("amazonPayInitiated"))return null;const i=e.closest('[action="/cart"], [action="/checkout"]');return i&&!this.context.validate(i)?(clearTimeout(utils.store.get("fallback").id),utils.store.set("submitted",!1),i.reportValidity()):(window.disableBodyScroll&&disableBodyScroll(),this._show(t,!1))},_show:function(e,i){this.apiMode=i;let t=lqd.product;if(OCUApi.enableCollectionLocation){var n,r=null!==(n=OCUApi.customAddToCartForm)&&void 0!==n?n:'form[action*="/cart/add"]',o=null===(n=(o=OCUApi).getCustomAddToCartData)||void 0===n?void 0:n.call(o);const u=+(null!==(o=null==o?void 0:o.id)&&void 0!==o?o:null===(r=e.target.closest(r))||void 0===r||null===(c=r.id)||void 0===c?void 0:c.value);t=lqd.collectionProducts.find(t=>t.variants.find(t=>t.id===u))}const s=this.context;var c=lqd.integrate_with_recharge&&!lqd.disabled_by_subscription_app;const a={utils:utils,Updater:Updater,is_recharge_enabled:c,is_skip_cart:lqd.skip_cart,product:t,integrations:{zipifyPages:s.integrations.zipifyPages}};return this[this.appropriateResponse?"_emptyResolve":"getIncartConfig"](this.appropriateResponse).then(function(t){if("skip"===t)throw new Error("There are no appropriate funnels");window.OCUIncart.preLoad&&window.OCUIncart.preLoad.showLoader(),s.helpers.beforeCreate(),utils.store.set("isTargetBuyNow",s.helpers.isBuyNow(e)),this.kind=t.data.kind,a.config=t.data,a.customer_tags=lqd.customer_tags||[],a.customer_location=OCUIncart.customer_location.handle;t=lqd.skip_cart||this.apiMode;return a.product&&!t&&(a.product=Object.assign({},a.product,{quantity:this._quantityOfProduct,selectedPageProduct:this._selectedVariant(a.product.variants)})),s.utils.beforePrecheckoutPopup(),OCUIncart._is_product_action=this.isProductAction,this._upsellAppInstance().setData(a)}.bind(this)).catch(t=>{t instanceof Error&&console.error(t),OCUApi.onPopupIsNotShown(),this[i?"_finalizeEvent":"checkout"].bind(this)()})},handleErrorResponse:function(){return this.apiMode||this.nativeClick(),this._emptyResolve("skip")},getIncartConfig:async function(){let t="/pre_purchase/v2/checkout_offers/appropriate?";var e=window.OCUIncart&&OCUIncart.appEndpoint,i={"Content-Type":"application/json","Shop-Domain":lqd.permanent_domain};const n=this.context;var r=this.actualCart||lqd.cart,o=n.helpers.isSameCart(r),r=n.helpers.isSameCartToken(r);(o||r)&&r||utils.cookie.remove("ocu_popup_ids");r=utils.cookie.get("ocu_popup_ids");r&&(t+="split_test_weight="+r);try{this.apiMode||this._endLoading();var s=this._incartPayload(),c=await OCUApi.axios.post(e+t,s,{headers:i});return c.data.error?this.handleErrorResponse():{data:c.data.context}}catch(t){return this.handleErrorResponse()}},checkout:async function(t){var e=t&&"ocuNativeClick"===t.type,i=t&&!(null!==(i=t.detail.response)&&void 0!==i&&i.accepted)&&this.isBuyNow;t&&!e&&(t.response?console.error(t.response.data.message):console.error(t));let n=this.isProductAction&&(!this.isBuyNow||i)&&e&&"Upgrade"!==t.detail.type&&!lqd.skip_cart;this._endLoading(),window.OCUIncart.preLoad&&window.OCUIncart.preLoad.hideLoader(),this.bt&&this.bt.present&&this.bt.endLoadingBtn();var{discount:e}=await OCUApi.callbackBeforeRedirect(this,t);if(!this.shopPayInstallments||(n=!this.handleShopPayInstallments(null!=t?t:{}),n||OCUApi.shopPayDraftOrder)){if(n)return this._upsellAppInstance().hide(),void this.nativeClick();!t||t instanceof Error||this.context.prevent(t,!0);t=t&&t.detail&&t.detail.response;return this.context.checkout({discount:e,redirect:!0,redirect_url:t&&t.redirect_url})}},handleShopPayInstallments:function(t,e){let{detail:i}=t;if(void 0===(null===i||void 0===i||null===(s=i.response)||void 0===s?void 0:s.accepted))return!1;const n=this.context.helpers.getCustomAddToCartData(this),{token:r}=n,o=_objectWithoutProperties(n,_excluded);var{checkoutUrl:t,query:s}=utils.store.get("shopPayInstallments"),s=`/cart/${o.id}:${o.quantity}?${s}=${r}`;const c=e?s:`${t}=${r}`;return!!(async()=>{"Upgrade"===(null===i||void 0===i?void 0:i.type)||e||await this.context.cart.add(null,null,o),location.assign(c)})()},isProductLocationOption:function(t){return this.shopPayInstallments?lqd.isPopupTriggerPage:OCUApi.customAddToCartButton?lqd.isPopupTriggerPage&&this._isAddAction(t):lqd.isPopupTriggerPage&&"form"===t.tagName.toLowerCase()&&this._isAddAction(t)},productLocation:function(t,e){const i=t=>{var{offer_type:t}=t;return!this.shopPayInstallments&&(lqd.skip_cart||this.isBuyNow&&"Upgrade"!==t)};if(this.popupAccepted)return OCUApi.preventEventBeforeNativeClick&&this.context.prevent(t,!0),this.nativeClick();this.context.prevent(t,!0),this.bt&&this.bt.present&&this.bt.startLoadingBtn(),e.disabled=!0,this.verifyToken().then(this[this.secondAttempt?"getActualCart":"_emptyResolve"].bind(this)).then(t=>this.actualCart=t&&t.data).then(function(){this.getIncartConfig().then(function(t){if("skip"!==t){if(i(t.data))return this.addAndCheck();this.appropriateResponse=t,this.check(this.event,this.target,null)}}.bind(this)).catch(t=>{OCUApi.onPopupIsNotShown(),this.nativeClick.bind(this)()})}.bind(this))},verifyToken:function(){return this.cartToken?this._emptyResolve():this.context.cart.bulkAdd()},addAndCheck:function(){var t,e=[null,null,null===(t=(e=OCUApi).getCustomAddToCartData)||void 0===t?void 0:t.call(e).payload],e=OCUApi.customSkipCart?e:[this.target];this.context.cart.add(...e).then(function(t){this.check(this.event,this.target,t.data)}.bind(this)).catch(this.checkout)},getActualCart:function(){return this.context.cart.get()},nativeClick:function(t){this._clearFlow(),this.secondAttempt=!0,this.ignoreTrust=t;const e=OCUApi.customAddToCartButton?this.target:this.eventTarget;this.context.helpers.removeExtraClassList(e),OCUApi.customAddToCartEvent?(e.dispatchEvent(new Event("click")),e.disabled=!1):OCUApi.customAddToCartEventHandler?OCUApi.customAddToCartEventHandler(e):(null!==e&&void 0!==e&&e.focus(),null!==e&&void 0!==e&&e.click()),this.shopPayInstallments&&this.isProductAction&&!this.popupAccepted&&this.handleShopPayInstallments({detail:{response:{accepted:!1}}},"nativeClick"),OCUApi.callbackAfterNativeClick&&OCUApi.callbackAfterNativeClick(this.event),this.bt&&this.bt.present&&this.bt.endLoadingBtn()},getTriggerAction(){return{cart:"cart",product:"product"}[this.isAcceptableAction(this.targetAction)?this.targetAction:"cart"]},isAcceptableAction:function(t){return lqd.isPopupTriggerPage&&OCUIncart.popupLocation[t]},breakHandling:function(t,e){return lqd.skip_cart?(this.context.prevent(t),this.context.cart.add(e).then(this.checkout.bind(this)).catch(this.checkout.bind(this))):this._clearFlow()},listenCustomEvent:function(t){const e=t||this.checkout;document.addEventListener("ocuNativeClick",e.bind(this),{once:!0})},removeCustomEvents:function(){document.removeEventListener("ocuNativeClick",this.checkout,!0)},_upsellAppInstance:function(){return OCUIncart[this.kind+"Upsells"]},_incartPayload(){const t=this.context.helpers.getCartItems((this.actualCart||lqd.cart).items);var e=this._productPageVariant,i=utils.cookie.get("ocu_shown_id");if(t.cart_token=this.cartToken,t.location=this.getTriggerAction(),t.currency=this.context.helpers.currencyRate(),t.customer_tags=lqd.customer_tags||[],t.customer_location=OCUIncart.customer_location.handle,t.snippet_version=OCUIncart.version,i&&(t.shown_popup_id=i),"product"===t.location){if(!e)throw new Error("Variant not found");t.line_items.push(e)}return utils.store.set("productLocation",e),t},_isAddAction:function(e){if(this.shopPayInstallments)return!0;return!!["customAddToCartButton","customAddToCartForm"].some(t=>e&&e.closest(OCUApi[t]))||e&&(/cart\/add/.test(e.action)||e.dataset.hasOwnProperty("zpAddToCartForm"))},_emptyResolve:function(e){return new Promise(function(t){t(e)})},_finalizeEvent:function(t){document.dispatchEvent(new CustomEvent("ocuNativeClick",{detail:{redirect_url:null}}))},_clearFlow(){return window.OCUIncart.preLoad&&window.OCUIncart.preLoad.hideLoader(),window.Zipify.OCU.api.context.helpers.clearFallback(),utils.store.set("submitted",!1),null},_initButtonLoading:function(){return OCUIncart.integrations().buttonLoading},_startLoading:function(){this.buttonLoading.startLoadingButton()},_endLoading:function(){this.buttonLoading.endLoadingButton()},_selectedVariant:function(t){const e=this._productPageVariant.variant_id;let i=0,n=null;return t.forEach(function(t){t.id===Number(e)&&(i=t.price,n=t.id)}),{price:i,variantId:n}},get _productPageVariant(){var t=this.context.helpers.getCustomAddToCartData(this);if(!this.isProductAction||t.subscription)return{};var e=this.target.querySelector('[name="id"], [name="id[]"]'),i=this.target.querySelector('[name="quantity"]')||(null===(i=this.target.closest('[id^="ProductInfo-template"]'))||void 0===i?void 0:i.querySelector('[name="quantity"]'));const n=+(t.id||e&&e.value);e=+(t.quantity||i&&i.value);let r=null!==(i=t.product)&&void 0!==i?i:lqd.product;OCUApi.enableCollectionLocation&&(r=lqd.collectionProducts.find(t=>t.variants.find(t=>t.id===n)));const o=r.variants.find(function(t){return t.id===n&&t.available});if(!((r.available||o)&&!Number.isNaN(n)))return null;t=o||r,i=r.options.map((t,e)=>({name:t,value:o.options[e]}));return{variant_id:n,product_id:r.id,price:t.price,handle:r.handle,title:r.title,quantity:e||1,is_product_location:!0,options_with_values:i}},get cartToken(){return lqd.cart.token||utils.cookie.get("cart")},get isProductAction(){return!lqd.skip_cart_only&&"product"===this.getTriggerAction()},get destination(){return!utils.store.get("isTargetBuyNow")&&this.isProductAction?"cart":"checkout"},get popupAccepted(){return"accept_or_decline"===OCUIncart.settings.popup_frequency&&utils.cookie.get("cart")===utils.cookie.get("ocu_popup_token")&&!!utils.cookie.get("ocu_accepted")},get targetAction(){if(!this.target)return"cart";if(OCUApi.customAddToCartButton)return lqd.isPopupTriggerPage&&this._isAddAction(this.target)?"product":"cart";var t=this.target&&"form"===this.target.tagName.toLowerCase()?this.target:this.target.closest("form");return this._isAddAction(t)?"product":"cart"},get eventTarget(){return this.isBuyNow?this.event.target:this.target.querySelector('[type="submit"], [name="add"], [name="checkout"], [data-skip-cart]')},get _quantityOfProduct(){var t=document.querySelector('[name="quantity"]');return t?t.value:"1"}};class CartDispatcher{constructor(t){this.cartToken=t&&t.cart.token||utils.cookie.get("cart"),this.cartDiscounts=null,this.cartRequested=!1,this.selectors={productPrice:null,totalProductsPrice:null,cartSubtotal:null,cartDiscount:null},this.helpers=new Helpers,this.cart=new Cart,this.cache=null,this.renderDiscounts=this.renderDiscounts.bind(this),this.renderOCUDiscounts=this.renderOCUDiscounts.bind(this)}renderDiscounts(t,e,i){if(document.dispatchEvent(new Event("renderOCUDiscounts")),i&&this.fillSelectors(i),!this.shouldGetDiscounts(e)&&this.areAttributesPresent(e)){if(this.helpers.deepEqual(this.lineItems,e))return this.renderDiscountsFromCache();this.lineItems=e,this.getDiscounts(t,e).then(function(t){const e=t.data.discounts.lineItems;this.cartDiscounts=t.data.discounts,this.cache=t.data,e.map(function(t){var e,i;if(t.price===t.discountedPrice)return null===(i=OCUApi.cartDiscountSelectors)||void 0===i||null===(e=i.showOriginalPrice)||void 0===e?void 0:e.call(i,t,!0);null===(e=OCUApi.cartDiscountSelectors)||void 0===e||null!==(i=e.showOriginalPrice)&&void 0!==i&&i.call(e,t,!1),this.fillDiscountedPrice(t),this.fillItemTotal(t)}.bind(this)),this.fillCartSubtotal(t.data.discounts.subtotal),this.fillCartDiscount(t.data.discounts.progressiveDiscount)}.bind(this)).catch(function(t){console.log(t.message)})}}renderDiscountsFromCache(){if(this.cache){const t=this.cache.discounts.lineItems;this.cartDiscounts=this.cache.discounts,t.map(t=>{var e,i;return t.price===t.discountedPrice?null===(i=OCUApi.cartDiscountSelectors)||void 0===i||null===(e=i.showOriginalPrice)||void 0===e?void 0:e.call(i,t,!0):(null===(e=OCUApi.cartDiscountSelectors)||void 0===e||null!==(i=e.showOriginalPrice)&&void 0!==i&&i.call(e,t,!1),this.fillDiscountedPrice(t),void this.fillItemTotal(t))}),this.fillCartSubtotal(this.cache.discounts.subtotal),this.fillCartDiscount(this.cache.discounts.progressiveDiscount)}}async getDiscounts(t,e){var i=window.OCUIncart&&OCUIncart.appEndpoint,n={"Content-Type":"application/json","Shop-Domain":lqd.permanent_domain};const r=this.helpers.getCartItems(e||lqd.cart.items);return r.cart_token=this.cartToken||t,r.currency_rate=window.Shopify&&Shopify.currency&&+Shopify.currency.rate||1,r.customer_tags=lqd.customer_tags||[],r.customer_location=OCUIncart.customer_location.handle,r.cart_token?{data:(await OCUApi.axios.post(i+"/pre_purchase/v2/cart_discounts",r,{headers:n})).data.context}:Promise.reject(new Error("Cart Token is Missing"))}doesUrlMatch(e){var t=["add","update","change","clear"].some(t=>e&&e.includes(`/cart/${t}`));return t&&this.setCartRequested(!1),t}shouldCartRequest(t){if(!t||this.cartRequested)return!1;var e=!/\/cart.(js|json)\?icu/.test(t),e=t.includes("/cart.js")&&!t.includes("/cart.js?ocu")&&e;return e&&this.setCartRequested(!0),e}shouldRequest(t){return!!t&&(this.doesUrlMatch(t)||this.shouldCartRequest(t))}shouldGetDiscounts(t){const e=this.helpers.getCartItems(t||lqd.cart.items).line_items;return e.every(function(t){if(t.properties)return void 0===t.properties._ocu_offer_id}.bind(this))}areAttributesPresent(t){const e=this.helpers.getCartItems(t||lqd.cart.items).line_items;return e.some(t=>{var e=this.getSelectors(t),i=document.querySelector(e.productPrice),n=document.querySelector(e.totalProductsPrice),t=document.querySelector(e.cartSubtotal),e=document.querySelector(e.cartDiscount);return!!(i||n||t||e)})}fillDiscountedPrice(r){var{productPrice:t}=this.getSelectors(r);const e=document.querySelectorAll(t);e.forEach(t=>{var e,i,n;t&&(e=t.dataset.ocuWithCurrency,i=this.getCurrency(r.discountedPrice,OCUIncart.money_format,e),n=this.getCurrency(r.price,OCUIncart.money_format,e),n=null!==(e=OCUApi.cartDiscountSelectors)&&void 0!==e&&e.disableWasPrice?"":`<del style="padding-right:16px">${n}</del>`,t.innerHTML=`${n}<span>${i}</span>`)})}fillItemTotal(o){var{totalProductsPrice:t}=this.getSelectors(o);const e=document.querySelectorAll(t);e.forEach(t=>{if(t){const r=t.dataset.ocuWithCurrency;var e=t=>this.getCurrency(t*o.quantity,OCUIncart.money_format,r),i=e(o.discountedPrice),n=e(o.price),n=null!==(e=OCUApi.cartDiscountSelectors)&&void 0!==e&&e.wasTotalPrice?`<del style="padding-right:16px;text-decoration:line-through">${n}</del>`:"";t.innerHTML=`${n}<span>${i}</span>`}})}fillCartSubtotal(t){var{cartSubtotal:e}=this.getSelectors();const i=document.querySelectorAll(e);var n=Zipify.OCU.api.customShippingInsurance,e=t+(null!==(e=null==n?void 0:n.price)&&void 0!==e?e:0);const r=null!=n&&n.enabled?e:t;i.forEach(t=>{var e;t&&(e=t.dataset.ocuSubtotal,t.innerHTML=this.getCurrency(r,OCUIncart.money_format,e))}),this.fillCartSubtotalCustom(r)}fillCartSubtotalCustom(t){var e,i;null===(e=OCUApi.cartDiscountSelectors)||void 0===e||null!==(i=e.cartSubtotalCustom)&&void 0!==i&&i.call(e,this.getCurrency(t,OCUIncart.money_format))}fillCartDiscount(e){if(0!==e){var{cartDiscount:t}=this.getSelectors();const i=document.querySelectorAll(t);i.forEach(t=>{t&&(t.innerHTML=`-${this.getCurrency(e,OCUIncart.money_format)}`)})}}getCurrency(t,e,i){var n=window.Shopify&&Shopify.currency&&Shopify.currency.active||"USD",e=!e.match(n)&&i?`${e} ${n}`:e;return Shopify.formatMoney&&Shopify.formatMoney(t,e)||window.OCUApi.currency(t/100,e,n)}fillSelectors(t){if(OCUApi.cartDiscountSelectors)return Object.entries(OCUApi.cartDiscountSelectors).forEach(t=>{var[e,t]=t;t instanceof Function||(this.selectors[e]=t)});this.selectors.productPrice=`[${t.productPrice}`,this.selectors.totalProductsPrice=`[${t.totalProductsPrice}`,this.selectors.cartSubtotal=`[${t.cartSubtotal}]`,this.selectors.cartDiscount=`[${t.cartDiscount}]`}getSelectors(t){var e,i,n;return{productPrice:(null===(i=OCUApi.cartDiscountSelectors)||void 0===i||null===(e=i.productPrice)||void 0===e?void 0:e.call(i,t,this))||`${this.selectors.productPrice||"[data-ocu-price-block"}="${null==t?void 0:t.key}"]`,totalProductsPrice:(null===(i=OCUApi.cartDiscountSelectors)||void 0===i||null===(n=i.totalProductsPrice)||void 0===n?void 0:n.call(i,t,this))||`${this.selectors.totalProductsPrice||"[data-ocu-total-block"}="${null==t?void 0:t.key}"]`,cartSubtotal:(null===(t=OCUApi.cartDiscountSelectors)||void 0===t?void 0:t.cartSubtotal)||this.selectors.cartSubtotal||"[data-ocu-subtotal]",cartDiscount:(null===(t=OCUApi.cartDiscountSelectors)||void 0===t?void 0:t.cartDiscount)||this.selectors.cartDiscount||"[data-ocu-cart-discount]"}}renderOCUDiscounts(n){cart.get("?ocu").then(t=>{var e;const i=[t.data.token,t.data.items,n];this.renderDiscounts(...i),null!==(t=(e=OCUApi).forceRenderDiscounts)&&void 0!==t&&t.call(e,()=>this.renderDiscounts(...i))})}removePrivateAttributes(t){if(t){const e=Array.from(document.querySelectorAll(t)),i=e.filter(t=>/_ocu_offer_/.test(t.innerHTML));i.forEach(t=>t.remove())}}proceedDiscounts(t,e){this.renderDiscounts(t.data.token,t.data.items),e&&this.removePrivateAttributes(OCUApi.customLineItemAttributes)}setCartRequested(t){this.cartRequested=t}}const cart=new Cart,cartDispatcher=new CartDispatcher(Zipify.OCU.lqd),open=window.XMLHttpRequest.prototype.open,originSend=window.XMLHttpRequest.prototype.send,openReplacement=function(t,e){return this.addEventListener("load",function(t){cartDispatcher.shouldCartRequest(this._url)?cartDispatcher.proceedDiscounts({data:JSON.parse(this.responseText)},!0):cartDispatcher.doesUrlMatch(this._url)&&cart.get("?ocu").then(function(t){cartDispatcher.proceedDiscounts(t,!0)}),OCUApi.customLineItemAttributes&&setTimeout(()=>cartDispatcher.removePrivateAttributes(OCUApi.customLineItemAttributes))}),window.simplyInsurance&&(this._url=e),open.apply(this,arguments)},fetchReplacement=function(t,e){"function"==typeof e&&(t.fetch=function(){const t=e.apply(this,arguments);return t.then(function(t){if(cartDispatcher.shouldCartRequest(t.url)){const e=t.clone();e.json().then(t=>{cartDispatcher.renderDiscounts(t.token,t.items)})}else cartDispatcher.doesUrlMatch(t.url)&&cart.get("?ocu").then(function(t){cartDispatcher.renderDiscounts(t.data.token,t.data.items)})}),t})};fetchReplacement(window,window.fetch),window.XMLHttpRequest.prototype.open=openReplacement,window.OCUApi||(window.OCUApi={}),window.OCUApi.renderOCUDiscounts=cartDispatcher.renderOCUDiscounts;class Currency{constructor(){this.currenciesWithoutDec=["BYR","XAF","XPF","CLP","KMF","JPY","PYG","RWF","KRW","VND","VUV","XOF","MGA","UGX","ISK"],this.entities={"&nbsp;":" ","&pound;":"","&euro;":"","&dollar;":"$"},this.types={amount:[2,",","."],amount_no_decimals:[2,",","."],amount_with_comma_separator:[2,".",","],amount_no_decimals_with_comma_separator:[2,".",","],amount_with_space_separator:[2," ",","],amount_no_decimals_with_space_separator:[2," ",","],amount_with_apostrophe_separator:[2,"'","."],get default(){return this.amount}},this.currency=this.currency.bind(this)}round(t){var e=10**(1<arguments.length&&void 0!==arguments[1]?arguments[1]:1);return Number.isInteger(t)?t*e/e:Math.round(t*e)/e}thousand(t){return isNaN(t)||0===t?t:t<999?Math.round(100*t)/100:t<9999||t<1e6?this.round(Math.round(10*t)/1e4,0)+"k":t<1e7?this.round(Math.round(10*t)/1e7,0)+"m":t<1e9?this.round(Math.round(10*t/1e7),0)+"m":1e9<=t?this.round(Math.round(10*t/1e10),0)+"b":void 0}replaceCharEntity(t){var e=t=>null!==this.entities[t]&&void 0!==this.entities[t]?this.entities[t]:t;return t&&null!==t.replace(/(&\w+;)/g,e)&&void 0!==t.replace(/(&\w+;)/g,e)?t.replace(/(&\w+;)/g,e):t}type(t){t=/\{\{\s*(\w+)\s*\}\}/.exec(t)&&/\{\{\s*(\w+)\s*\}\}/.exec(t)[1];return null!==this.types[t]&&void 0!==this.types[t]?this.types[t]:this.types.default}toFixed(t,e){var i=Math.pow(10,e);return(Math.round((t+1e-8)*i)/i).toFixed(e)}formatNumber(t,e,i){if(!+t&&0!=+t)return"&mdash;";let n;var r=i.includes("thousand"),o=i.includes("noCurrency"),o=i.find(t=>this.currenciesWithoutDec.includes(t))||o,i=i.includes("noPrecision");r&&(t=this.thousand(+t),n=/\d+\.?\d*([k-m])/.exec(t)&&/\d+\.?\d*([k-m])/.exec(t)[1]||"",t=parseFloat(t)),e={precision:i?0:e[0],thousand:e[1],decimal:e[2]};r=t<0?"-":"";let s=parseInt(this.toFixed(Math.abs(t),e.precision),10)+"";i=3<s.length?s.length%3:0;let c=r+(i?s.substr(0,i)+e.thousand:"")+s.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+e.thousand)+(0<e.precision?e.decimal+this.toFixed(Math.abs(t),e.precision).split(".")[1]:"");return n&&(c=c.replace(/([,.]00|0)$/,"")+n),o&&!n?c.split(e.decimal)[0]:c}formatNumberForView(t,e){e=this.replaceCharEntity(e);for(var i=arguments.length,n=new Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];var o=n.includes("noCurrency");return e&&e.replace(o?/.*\{\{\s*\w+\s*\}\}.*/:/\{\{\s*\w+\s*\}\}/,this.formatNumber(t,this.type(e),n))}currency(t,e){for(var i=arguments.length,n=new Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return this.formatNumberForView(t,e,...n)}}window.OCUApi||(window.OCUApi={}),window.OCUApi.currency=(new Currency).currency;
window.OCUIncart={...(window.OCUIncart ||{}),version:'{{updated}}',cart_items:{{cart.items|json}},subscription_tags:'{{subscription_products_tags|url_encode|replace:"%27","%5C%27"|url_decode}}',money_format:'{{shop.money_format|url_encode|replace:"%27","%5C%27"|url_decode}}',option_selection:'{{'option_selection.js'|shopify_asset_url}}',metafields:{main:{{main_metafields}} ||{},get general() {return this.main.general ||{};},get settings() {return this.general.settings ||{};},get triggers() {return this.general.triggers ? this.general.triggers.pre_checkout:{};},get proxy_url() {return this.settings.proxy_url ||'/apps/secure-checkout';},get scripts() {const onPage='zipify-oneclickupsell-on-page';const scripts=this.general.settings.offer_scripts ?? {};const vendor='zipify-oneclickupsell-vendor';const loaded=Zipify.OCU.api.loaded ||{};if (Shopify?.designMode && !scripts[onPage]) scripts[onPage]=true;const uris=Object .entries(scripts) .reduce((acc,[script,enabled]) => (enabled && !script.includes('.js') && !loaded[script] ? [...acc,script]:acc),[]);return uris.length ? [...uris,vendor]:uris;}},get hasNotOfferInCart() {if (!this.cart_items.length) return true;return !this.cart_items.find(function(item) {return item && item.properties && (item.properties._ocu_offer_id ||item.properties._ocu_product_page_id);});},get hasWidgetOffersInCart() {if (!this.cart_items.length) return true;return this.cart_items.find(function(item) {return item && item.properties && item.properties._ocu_product_page_id;});},get settings() {return this.metafields.settings.popup_settings;},get proxy_url() {return this.metafields.proxy_url;},get appEndpoint() {return this.metafields.settings.app_endpoint;},get popupLocation() {return this.metafields.general.settings.popup_locations;},get isEmptyCart() {return !this.cart_items.length && this.popupLocation.product;},get permanent_domain() {return Zipify.OCU.lqd.permanent_domain;},get hasWidgetOffers() {return !!Object.keys(OCUApi.store.get('productPageWidget')).length;},preventHandle(checkoutButton,addToCartButton) {return OCUApi.productLocationOnly && !this.popupLocation.cart && checkoutButton && !addToCartButton;}};Zipify.OCU.lqd={cart:{{cart|json}},path:'{{fi}}' ==='true' ? 'd56719fefdd75e95ba06caea3d9a3732':'5965fedc7708e03e1024db4bf2ed5fe6',template_name:'{{template.name}}',shop_currency:'{{shop.currency}}',skip_cart:OCUIncart.metafields.general.integrations.skip_cart ==='true',skip_cart_only:'{{skip_cart_only}}' ==='true',cart_products_json:JSON.parse({{cart_products_json|prepend:'['|append:']'|json}}),cart_collections_json:[{{cart_collections_json}}],cart_variants_json:[{{cart_variants_json}}],customer_id:{{customer_id}},customer:{id:{{customer_id}},email:'{{customer.email}}'},customer_tags:{{customer_tags}},proxy_url:OCUIncart.metafields.general.settings.proxy_url,scripts:OCUIncart.metafields.scripts,permanent_domain:'{{shop.permanent_domain}}',current_domain:'{{request.host}}',disabled_by_subscription_app:{{disabled_by_subscription_app}},subscription_app_enabled:{{subscription_app_enabled}},subscription_products_json:'{{subscription_products_json}}',subscription_variants_json:'{{subscription_variants_json}}',subscription_products_size:{{subscription_products.size}},integrate_with_recharge:'{{integrate_with_recharge}}' ==='true',product:{{product|json}} ||OCUApi.product,collectionProducts:{{collection.products|json}},product_tags:{{product_tags|json}},amazon_pay:'{{amazon_pay}}' ==='true',themePopup:'{{settings.cross_sell}}' ==='true' ||'{{settings.upsell_popup_enable}}' ==='true',root_url:'{{root_url}}',themeSkipCart:'{{settings.cart_action}}' ==='redirect_checkout' ||'{{settings.enable_product_cart_skip}}' ==='true' ||'{{settings.atc_cart_style}}' ==='skip_cart',get upsell_cart_include_subscription_upsells() {var self=this;var hasSubscription=this.product_tags.reduce(function(acc,tag) {return acc ||~self.postcheckout_tags.indexOf(tag.toLowerCase());},false);return hasSubscription;},get isThemePopupTag() {return this.product && this.product.tags.some(function(tag) {return /cross-sell-\d/.test(tag);});},get isSkipCartPage() {return /index|collection|product/.test(this.template_name);},get isSkipCartCondition() {return (this.skip_cart ||this.themeSkipCart) && this.isSkipCartPage && !this.isThemePopupTag;},get checkoutUrl() {return (this.root_url ==='/' ? '':this.root_url) + '/checkout';},get isPopupTriggerPage() {const popupLocation={...OCUIncart.popupLocation};if (OCUApi.enableCollectionLocation) {popupLocation.collection=popupLocation.product;} if (OCUApi.enableCustomPages) {const pageName=OCUApi.customPageName ||'page';popupLocation[pageName]=popupLocation.product && OCUApi.enableCustomPages.includes(location.pathname);} return popupLocation[Zipify.OCU.lqd.template_name];}};Zipify.OCU.lqd.cart_products_json=Zipify.OCU.lqd.cart_products_json.filter(function(item) {return item.handle && !item.error;});const lqd=Zipify.OCU.lqd;if (Zipify.OCU.loadScriptTags) Zipify.OCU.loadScriptTags();
function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);e=r.call(t,e||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}function Application(){OCUApi.axios=OCUApi.axios||axios,ajax=OCUApi.axios.create({timeout:8e3}),ajax.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",utils.shareableDiscount({clear:!1}),new PublicMethod,new SkipCart,new HistoryApi,this.helpers.getLocation().then(()=>{var t,e;return lqd.skip_cart_only||this.setAttributes(),null!==(t=OCUIncart)&&void 0!==t&&null!==(e=t.productPageWidget)&&void 0!==e&&e.setData?OCUIncart.productPageWidget.setData():void this.helpers.listenWidgetEvent()})}function ProductPageWidget(){this.isWidgetPresent=function(){return document.querySelector("#ocu-widget")&&OCUIncart.hasWidgetOffers&&!utils.store.get("widgetHandled")},this.accept=async function(){if(OCUIncart.hasWidgetOffers){const n=Zipify.OCU.api.context;var t=await n.cart.get(),e=window.OCUIncart&&OCUIncart.appEndpoint,r={"Content-Type":"application/json","Shop-Domain":lqd.permanent_domain},t=t.data;OCUIncart.cart_items=t.items;t={checkout:{attributes:t.attributes,cart_token:t.token,line_items:t.items,note:t.note},customer_location:null===(t=OCUIncart.customer_location)||void 0===t?void 0:t.handle,customer_tags:lqd.customer_tags||[]};return OCUApi.axios.post(e+"/product_page/v1/offers/accepted",t,{headers:r})}},this.clearState=function(){OCUApi.store.set("productPageWidget",{}),OCUIncart.productPageWidget.clear()},this.proceed=function(){const t=Zipify.OCU.api.context;var e=window.OCUApi.store.get("productPageWidget"),e=Object.entries(e).reduce((t,e)=>{var[r,e]=e;return r&&t.push({id:e.variantId,quantity:1,properties:{_ocu_product_page_id:+r,_ocu_offer_reference_id:+e.referenceId}}),t},[]);return e.length?t.cart.add(null,null,{items:e}):new Promise(function(t){t()})},this.disable=function(t){utils.store.set("widgetHandled",t)}}function ZipifyPages(){const n="ocu_integration_data";this.setProducts=t=>{this.products=t},this.setBlockId=t=>{this.block_id=t},this.getProduct=()=>this.product,this.appendZipifyPagesProduct=t=>{var e;if(!this.products)return t;const n=null===(e=this.products.find(t=>t.discountHash))||void 0===e?void 0:e.discountHash;return t.map(e=>{const t=this.products.find(t=>t.productData.key===e.key);if(!t)return e;if(null===t||void 0===t||!t.discountData.includes("dynamic"))return e;var r={pages:!0,discount_hash:n,block_id:this.block_id};return e.properties=_objectSpread(_objectSpread({},e.properties),r),e})},this.init=()=>{try{this.sessionData=JSON.parse(sessionStorage.getItem(n)),this.sessionData&&this.sessionData.token!==lqd.cart.token&&(this.sessionData=null,sessionStorage.removeItem(n))}catch(t){console.error(t)}},this.handleZPOutsidePage=(e,r)=>{try{var t=JSON.stringify({products:this.products,block_id:this.block_id,token:lqd.cart.token});sessionStorage.setItem(n,t),r({detail:{}})}catch(t){console.error(t),this._verifyFallback(e,r)}},this._verifyFallback=(e,r)=>{e.cart.get().then(t=>{OCUIncart.cart_items=t.data.items,e.verify().then(()=>{r({detail:{}})})})},this.clear=()=>{this.products=null},this.isBlockOutsideProductPage=()=>!lqd.isPopupTriggerPage&&this.products.some(t=>t.discountHash),this.init()}function amazonPay(t){const e=t.target.closest('form[action^="https://payments.amazon"]');if(e&&lqd.amazon_pay){t.preventDefault(),t.stopPropagation(),utils.store.set("amazonPayInitiated",!0);var r=t.target.closest('form[action="/cart/add"]');const i=lqd.proxy_url+"/amazon/forward",o=function(){e.submit()};function n(t){if(!t.status)return o();t=function(t){var e=lqd.proxy_url.replace(/\//g,"\\/");const r=new RegExp(e+"\\/((?:\\w+[-_]?)+)\\/?");t=r.exec(t);return t&&t[1]}(t.checkout_url);if(!t)return o();utils.cookie.set("ocu_checkout_token",t),location.assign(i)}if(!r)return this.checkout().then(n).catch(o);t=document.querySelector('form[action="/cart/add"]'),r=e.querySelector('[type="submit"]');this.cart.add(t,r).then(this.checkout).then(n).catch(o)}}function Bold(){this.isBoldRecuring=function(){var t=document.querySelector("[data-bold-recurring]");return t&&t.checked},this.upsellPopup=function(t){[t.querySelector('[data-bold-component-id="upsell_continue"]'),t.querySelector('[data-bold-component-id="upsell_no_thanks"]'),t.querySelector("#bold-modal__btn-close")].forEach(function(t){t&&t.addEventListener("click",function(t){setTimeout(function(){self.checkout({redirect:!0})},500)})})},this.initRecurring=function(){var t=document.querySelectorAll("[data-ocu-clone]"),t=Array.prototype.filter.call(t,function(t){return t&&!t.dataset.ocuCheckout})[0];t&&t.click()},this.redirect=function(t){if(!(window.BOLD&&BOLD.recurring_orders&&BOLD.recurring_orders.app&&t.isTrusted))throw new Error("Bold Recurring not found");if(!BOLD.common.cartDoctor.cart.is_recurring)throw new Error("Bold Recurring cart error");t.preventDefault(),t.stopImmediatePropagation(),BOLD.recurring_orders.app.cartWidget.checkoutEvent=t,BOLD.recurring_orders.app.cartWidget.checkRecurringCheckout(t)},this.recurring=function(t,e){var r="https://",n="recurringcheckout.com",i="/s/",o=/(\w+)\.myshopify\.com/.exec(BOLD.common.Shopify.shop.permanent_domain)[1],a="/checkout/recurring/",s="?shop_url="+location.host;t.action=r+n+i+o+a+e+s,t.submit()}}function BuyNowBtns(){if(lqd.themeSkipCart){const r=this,n=document.querySelector('button[id="AddToCart"]');if(n){var t=n.querySelector("#AddToCartText");if(/buy\s*(it)?\s*now/i.test(t&&t.innerText)){const i=function(){r.checkout({redirect:!0})};n.addEventListener("click",function(t){t.preventDefault();var e=n.closest('form[action="/cart/add"]');r.cart.add(e,t.target).then(i).catch(function(t){t.submit()}.bind(null,e))})}}}}function HandlePermalink(r,t){var e=this,n=utils.store.get("permalink").exec(r),i={redirect:t};if(!n)return{promise:new Promise(function(t){t({checkout_url:r})}),callback:function(e){return t?location.assign(r):new Promise(function(t){t(e)})}};var o=n[2];o&&(i.params=[{discount:o}]);n=n[1].split(",").reduce(function(t,e,r,n){var i=+e.split(":")[0],o=+e.split(":")[1],e=lqd.cart_variants_json.filter(function(t){return t.id===i})[0];return e&&(o+=e.quantity),t&&(t+="&"),t+"updates["+i+"]="+o},"");return{promise:e.cart.bulkAdd(n),callback:function(){return e.checkout(i)}}}function CartDrawer(t){t=t.querySelector('form[action="/cart"]'),t=t&&t.querySelector('input[type="submit"]');t&&(t.type="button",t.addEventListener("click",function(t){self.checkout({redirect:!0})}))}function CartPopup(){var t,e,r,n,a=document.querySelector(".bkt--upsell-target-checkout");a&&(t="input ",e='type="button" ',r='style="position:absolute;left:0;top:0;width:100%;height:100%;cursor:pointer;opacity:0" ',n="data-ocu-dialog-btn ",a.style.position="relative",a.insertAdjacentHTML("beforeend","<"+t+e+r+n+">"),document.querySelector("[data-ocu-dialog-btn]").addEventListener("click",function(t){var o;t.stopPropagation(),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="bkt--nc-icon" x="0px" y="0px" width="64px" height="15px" viewBox="0 0 64 64"><g><circle class="nc-dots-7-2" data-color="color-2" fill="#445FFF" cx="32" cy="32" r="26" transform="translate(6.26687999999989 6.26687999999989) scale(0.8041600000000034)" style="opacity:0.8041600000000034"></circle><circle class="nc-dots-7-1" fill="#445FFF" cx="-72" cy="32" r="26" transform="translate(3.2332800000000272 12.933120000000109) scale(0.5958399999999966)" style="opacity:0.5958399999999966"></circle><circle class="nc-dots-7-3" fill="#445FFF" cx="132" cy="32" r="26" transform="translate(33.6 19.2) scale(0.4)" style="opacity:0.4"></circle></g></svg>',o=0,window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime(),r=Math.max(0,16-(e-o)),n=window.setTimeout(function(){t(e+r)},r);return o=e+r,n});var u=[],l=null;u[0]=document.getElementsByClassName("nc-dots-7-1"),u[1]=document.getElementsByClassName("nc-dots-7-2"),u[2]=document.getElementsByClassName("nc-dots-7-3"),circleDots7Number=u[0].length,window.requestAnimationFrame(function t(e){var r=e-(l=l||e),e=Math.min(r/250,4);if(decimalRot=(e=4==e?0:e)%1,upperInteger=Math.ceil(e),r<1e3||(l+=1e3),u[0][0]){window.requestAnimationFrame(t);var n=[],o=[],a=[],s=[-72,32,132],c=[32,32,32];for(j=0;circleDots7Number>j;j++)for(n[0]=n[1]=n[2]=.4,1==upperInteger?(n[0]=1-3*decimalRot/5,n[1]=.4+3*decimalRot/5):2==upperInteger?(n[1]=1-3*decimalRot/5,n[2]=.4+3*decimalRot/5):3==upperInteger?(n[1]=.4+3*decimalRot/5,n[2]=1-3*decimalRot/5):4==upperInteger?(n[0]=.4+3*decimalRot/5,n[1]=1-3*decimalRot/5):n[0]=1,i=0;i<3;i++)o[i]=(1-n[i])*s[i],a[i]=(1-n[i])*c[i],function(t,e){for(var r in e)t.setAttribute(r,e[r])}(u[i][j],{transform:"translate("+o[i]+" "+a[i]+") scale("+n[i]+")",style:"opacity:"+n[i]+";"})}}),self.checkout({redirect:!0})}))}function CheckoutLinks(){var t=document.querySelectorAll('a[href="/checkout"]');Array.prototype.forEach.call(t,function(t){t&&t.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),self.checkout({redirect:!0})})})}function Discounts(){var t,e=document.querySelector('input[name="discount"]'),r=utils.cookie.get("discount_code"),n=utils.cookie.get("ocu-share-discount"),i=utils.cookie.get("popupcookie");window._chpmgr&&!i||(e||r||n)&&(e&&(t=e.value),r&&(t=r,utils.cookie.remove("discount_code")),n&&(t=n,utils.cookie.remove("ocu-share-discount")),r={name:"discount",value:encodeURIComponent(t)},t=utils.store.get("params"),n&&"page"===lqd.template_name||!r.value||(t.arr.push(r),utils.store.set("params",t)))}function Recharge(){var t=this;this.isSubscription=function(t){const e=t.cart||t.data.cart||t.data;return e.items.some(function(t){return t.selling_plan_allocation?null:t.properties&&(t.properties.subscription_id||t.properties.shipping_interval_frequency)})},this.processCart=function(){window.reChargeProcessCart=function(){t.checkout({redirect:!0})}},this.redirect=function(t,e,i){let r=OCUApi.customRechargeUrl||"https://checkout.rechargeapps.com";function o(){var t=["myshopify_domain="+Shopify.shop];return r+"/r/checkout?"+(t=t.concat(function(){try{return["cart_token="+(document.cookie.match("(^|; )cart=([^;]*)")||0)[2]]}catch(t){return[]}}()).concat(function(){try{return[ga.getAll()[0].get("linkerParam")]}catch(t){return[]}}())).join("&")}function c(t){return t.filter(function(t){var e="radio"===t.getAttribute("type")&&t.checked,r="checkbox"===t.getAttribute("type")&&t.checked,n="checkbox"!==t.getAttribute("type")&&"radio"!==t.getAttribute("type");return!!t.value&&(n||e||r)})}function a(){var t,e,n=/attributes\[(.*?)\]/,i=/\[(.*?)\]/,r=document.querySelectorAll(['[name*="attributes"]'].join(",")),r=c(Array.prototype.slice.apply(r)),o={},a=function(){var e=/^_shopify_sa_p/,r=/^utm_/,n=/^_shopify_sa_t/,i={},o="",a="";document.cookie.split(";").map(function(t){return t.trim()}).forEach(function(t){e.test(t)&&(o=t),n.test(t)&&(a=decodeURIComponent(t.split("=")[1]))});var t=o.split("=")[1];if(decodeURIComponent(t).split("&").forEach(function(t){var e=t.split("=")[0],t=t.split("=")[1];if(r.test(e))return i[e]=t}),Object.keys(i).length)return i.utm_timestamp=a,i.utm_data_source="shopify_cookie",i}(),s=new URLSearchParams(decodeURIComponent(window.location.search));for(t of s)n.test(t[0])&&(e=(e=t[0].match(i)[0]).substring(1,e.length-1),o[e]=s.get(t[0]));return r.forEach(function(t){var e=t.getAttribute("name"),r=t.value;if(n.test(e)){t=(t=e.match(i)[0]).substring(1,t.length-1);return o[t]=r}return o[e]=r}),a&&Object.keys(a).forEach(function(t){o[t]=a[t]}),Object.keys(o).length?{attributes:Object.assign({},o)}:{}}function n(){return fetch("/cart.js").then(function(t){return t.json()}).then(function(t){return{cart:JSON.stringify(t)}}).catch(function(t){return console.error("Error retreiving cart: ",t),{cart:{}}}).then(function(t){var e,r,n={};return[(r=document.querySelectorAll(["#terms","#agree"].join(",")),(r=c(Array.prototype.slice.apply(r)).map(function(t){return t.value})).length?{terms_and_conditions:r.join(", ")}:{}),(e=document.querySelectorAll(['[name="note"]'].join(",")),r=Array.prototype.slice.apply(e).filter(function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}).map(function(t){return t.value}),(e=new URLSearchParams(decodeURIComponent(window.location.search)).get("note"))&&r.push(e),r.length?{note:r.filter(function(t,e,r){return r.indexOf(t)===e}).join(", ")}:""),a(),n=t].forEach(function(t){Object.assign(n,t)}),n})}function s(t,e){var r,n,i=document.createElement("form");return i.setAttribute("method","post"),i.setAttribute("action",e),i.setAttribute("id","rc_form"),i.style.display="none",r=i,n=t,Object.keys(n).forEach(function(t){var e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name",t),e.setAttribute("value","object"==typeof n[t]?JSON.stringify(n[t]):n[t]),r.appendChild(e)}),i}n().then(function(e){var r,n;[...JSON.parse(e.cart).items].some(t=>t.properties&&(t.properties.shipping_interval_unit_type||t.properties.shipping_interval_frequency))?(r=o(),e?((n=new XMLHttpRequest).open("POST","/cart/update.js"),n.setRequestHeader("Content-Type","application/json"),n.onload=function(){200===n.status?window.console.log("done",JSON.parse(n.responseText)):200!==n.status&&window.console.log("fail",JSON.parse(n.responseText));var t=s(e,r);document.body.appendChild(t),t.submit()},n.send(JSON.stringify(e))):window.location.href=r):window.location.href=i||"/checkout"})}}function smar7(){var t,e,r,n,i=this;~document.head.innerHTML.indexOf("bundle-upsell")&&(t=document.querySelectorAll("[name='checkout'], [href^='/checkout'], form[action='/checkout'] [type='submit'], #checkout, [name='goto_pp'], .checkout_button"),Array.prototype.forEach.call(t,function(t){t.disabled=!0}),e=0,r=setInterval(function(){(++e&&7<e||window.SMAR7&&SMAR7.bundle)&&(Array.prototype.forEach.call(t,function(t){t.disabled=!1}),clearInterval(r))},3e3),n=function(t){var e=utils.store.get("params");t?(SMAR7.util.setCookie("smar7coupon",t,3600),e.arr.push({name:"discount",value:encodeURIComponent(t)})):t=SMAR7.bundle.helper.determineCoupon&&SMAR7.bundle.helper.determineCoupon(),SMAR7.paypal?(encodeURIComponent(t),document.querySelector('[name="goto_pp"]')):(encodeURIComponent(t),document.querySelector('[name="checkout"], [href="/checkout"], form[action="/checkout"] input[type="submit"], #checkout')),utils.store.set("params",e),i.checkout({redirect:!0})},document.addEventListener("click",function(){window.SMAR7&&SMAR7.bundle&&(SMAR7.bundle.redirect=n)},!0))}function Integrations(){const i=this;var t=new Bold,e=new Recharge,r=new ZipifyPages,n=new ProductPageWidget;this.list={bold:{get isInstalled(){return window.BOLD&&BOLD.apps_installed},get productOptions(){return this.isInstalled&&BOLD.apps_installed["Product Options"]},get productUpsell(){return this.isInstalled&&BOLD.apps_installed["Product Upsell"]}},recharge:{isSubscriptionProduct:function(t){return t.items.some(function(t){return t.properties&&(t.properties.subscription_id||t.properties.shipping_interval_frequency)})}}},this.boldUpsellCheckoutOffer=function(){if(window.BOLD&&window.Shopify){var t={data:{cart:{items:lqd.cart.items,total_price:lqd.cart.total_price}}};return ajax.request({method:"post",url:window.BOLD.upsell.path+window.Shopify.shop+"/validate_checkout_offer",data:JSON.stringify(t)})}},this.needSkipClick=this.list.bold.productOptions||this.list.bold.productUpsell,this.start=function(){lqd.upsell_cart_include_upsells&&"cart"!==lqd.template_name&&this.main()},this.main=function(){function e(t){if("attributes"===t.type&&t.target===document.querySelector(i.ocuSelectors)&&/cart-?(popup|container|drawer)/i.test(t.target.id)&&/bold-upsell-modal-window/i.test(t.target.id)){if("bold-upsell-modal-window"===t.target.id)return i.boldUpsellPopup(t.target);var e=document.querySelectorAll(i.ocuSelectors),r="true"===e[0].dataset.disableRecharge,n=Array.prototype.forEach;n.call(e,function(t){"Checkout"===t.innerHTML&&t.removeAttribute("onclick")}),lqd.disabled_by_subscription_app&&r||(n.call(e,function(t){t.disableRecharge=!0}),i.cartPopup(),i.cartDrawer(t.target),i.checkoutLinks(),i.listenEvents())}}new MutationObserver(function(t){t.forEach(e)}).observe(document,{childList:!0,subtree:!0,attributes:!0}),i.buyNowBtns(),i.recharge.processCart(),i.revy()},this.revy=function(){window.RevyApp&&RevyApp.events&&(RevyApp.events.updatedCart=[])},this.discounts=Discounts,this.smar7=smar7,this.isBoldRecuring=t.isBoldRecuring,this.boldRecurring=t.initRecurring,this.bold=t,this.boldUpsellPopup=t.upsellPopup,this.cartPopup=CartPopup,this.cartDrawer=CartDrawer,this.checkoutLinks=CheckoutLinks,this.handlePermalink=window.oneClickUpsellHandlePermalink=HandlePermalink.bind(this),this.buyNowBtns=BuyNowBtns,this.recharge=e,this.amazonPay=amazonPay,this.zipifyPages=r,this.widget=n,this.start()}function HistoryApi(){var e,r;history.pushState=(e=history.pushState,function(){var t=e.apply(this,arguments);return window.dispatchEvent(new Event("pushState")),window.dispatchEvent(new Event("locationchange")),t}),history.replaceState=(r=history.replaceState,function(){var t=r.apply(this,arguments);return window.dispatchEvent(new Event("replaceState")),window.dispatchEvent(new Event("locationchange")),t}),window.addEventListener("popstate",function(){window.dispatchEvent(new Event("locationchange"))})}Application.prototype={checkout:null,ocuSelectors:`${utils.store.get("ocuSelectors")} ${OCUApi.customCheckoutButton||""}`,integrations:new Integrations,helpers:new Helpers,cart:new Cart,utils:new ApplicationsUtils,popupDispatcher:new PopupDispatcher,cartDispatcher:new CartDispatcher(Zipify.OCU.lqd),setAttributes:function(){var t=/register|account|login|reset_password|search|^$/.test(lqd.template_name),e=OCUApi.enableCustomPages&&""===lqd.template_name;if(!t||e){this.cartDispatcher.renderDiscounts();const r=Array.prototype.forEach;t=document.querySelectorAll(this.ocuSelectors),e=document.querySelectorAll("a");r.call(t,function(t){"update"===t.name||"FORM"===t.tagName||t.closest(OCUApi.excludeActionButton)||(t.dataset.ocuCheckout=!0)}),r.call(e,function(t){utils.store.get("shopPayInstallments").id!==t.id&&utils.store.get("permalink").test(t.href)&&(t.dataset.ocuCheckoutLink=!0)}),this.listenEvents(),setTimeout(this.helpers.showCheckoutButton)}},check:function(t,e){this.prevent(t);t=e.closest('[action="/cart"], [action="/checkout"]');return t&&!this.validate(t)?(clearTimeout(utils.store.get("fallback").id),utils.store.set("submitted",!1),t.reportValidity()):utils.store.get("cartChanged")?void 0:this.handle(e)},handle:function(t){this.integrations.discounts(),utils.store.get("checkoutButtonState")||(utils.store.set("checkoutButtonState",!0),this.helpers.payPal(t),this.checkout({redirect:!0}))},init:async function(t,e){var r=this;if(OCUApi.callbackBeforeRedirect&&utils.store.get("submitted")&&!OCUApi.preventReloadPersistedPage)return r.prevent(t);const n=OCUIncart.integrations().navidiumShippingProtection;if(n.callbackExist&&await n.setup(t),!OCUApi.onCheckout||!OCUApi.onCheckout()){if("cart"===lqd.template_name&&utils.store.get("submitted"))return t.stopPropagation(),t.preventDefault();if(utils.store.set("submitted",!0),this.fallbackRedirect(),window.RevyApp&&this.handleMonkeyPatching(),this.allowUpsells(e)){if("product"===lqd.template_name&&"add"===e.name&&!e.closest('form[action$="/cart/add"]')&&!OCUApi.customAddToCartForm){const s=document.querySelector('form[action$="/cart/add"]');return s?(t.preventDefault(),t.stopPropagation(),s.submit()):this.helpers.clearFallback()}var i,o=window.OCUIncart&&(OCUIncart.singleUpsells||OCUIncart.multipleUpsells);if(o)return(null!==(i=(a=OCUApi).customFormValidate)&&void 0!==i&&i.call(a,e),OCUApi.isFormInvalid)?(r.prevent(t,!0),clearTimeout(utils.store.get("fallback").id),void utils.store.set("submitted",!1)):(OCUApi.originFetch&&(fetch=OCUApi.originFetch),this.popupDispatcher.proceed(t,e,r));var a=this.popupDispatcher._isAddAction(e);return!o&&lqd.isPopupTriggerPage&&a?clearTimeout(utils.store.get("fallback").id):("true"===t.target.dataset.skipCart||t.target.closest("[data-skip-cart]"))&&utils.store.get("submitted")?(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.cart.add(e).finally(this.checkout({redirect:!0}))):(e.dataset.customBuyNow&&(r.prevent(t),o=e.dataset.varientId,a=e.dataset.itemQuantity,this.cart.add(null,null,{id:o,quantity:a}).then(function(){r.checkout({redirect:!0})}).catch(function(){alert("Network Error")})),this.check(t,e))}}},prevent:function(t,e){t.preventDefault(),t.stopPropagation(),e&&t.stopImmediatePropagation()},validate:function(t){const e=[...t.querySelectorAll('[type="text"], [type="checkbox"], select, textarea')],r=e.filter(t=>{var e;return!utils.store.get("excludedRequiredFormIds").includes(null==t||null===(e=t.form)||void 0===e?void 0:e.id)&&(t&&t.required)});return!r.length||!r.some(t=>!t.checkValidity())},allowUpsells:function(t){return OCUApi.customAllowUpsellsValidation?OCUApi.customAllowUpsellsValidation():!(window.popup_upsell&&!document.querySelector("#upsellclosebtn")||window.ol_checkout_ok instanceof Function&&!ol_checkout_ok()||""===t.dataset.zpaSubmitButton)||void 0},fallbackRedirect:function(){const t=utils.store.get("fallback");t.id||(t.id=setTimeout(function(){this.checkout({redirect:!0})}.bind(this),t.timeout),utils.store.set("fallback",t))},handleMonkeyPatching:function(){var t=utils.store.get("XHR").send;XMLHttpRequest.prototype.send!==t&&(XMLHttpRequest.prototype.send=t)},handleClick:function(e){if(("page"!==lqd.template_name||e.isTrusted)&&"update"!==e.target.name&&!e.target.closest('[name="update"]')&&(lqd.amazon_pay||!e.target.closest('form[action^="https://payments.amazon"]'))&&!this.helpers.zpPreventRedirect(e.target)){if(this.helpers.isBuyNow(e)&&!lqd.isPopupTriggerPage)return new BuyNow(e,this.integrations.widget);if(!this.helpers.isCartPopupRedirectsToCart(e)){const n=this.helpers.checkAddToCart(e.target);if(n||!OCUIncart.integrations().minMaxify.invalid){if(e.target.dataset.ocuCheckoutLink||e.target.closest("[data-ocu-checkout-link]")){e.preventDefault();var r=(e.target.dataset.ocuCheckoutLink?e.target:e.target.closest("[data-ocu-checkout-link]")).href;if(utils.store.get("isPermalinkHandling"))return;utils.store.set("isPermalinkHandling",!0);r=this.integrations.handlePermalink(r,"redirect");return r.promise.then(r.callback)}OCUIncart.integrations().salesRocket.setup();let t=this.helpers.checkSelector(e.target);if(!OCUIncart.preventHandle(t,n)){const{isWidgetPresent:i,proceed:o,disable:a,accept:s,clearState:c}=this.integrations.widget;if(lqd.isPopupTriggerPage&&(t=n||t),i()&&n&&e.isTrusted&&!this.helpers.isBuyNow(e))return this.prevent(e,!0),o().then(async()=>{(this.popupDispatcher.context=this).popupDispatcher.target=n,a(!0),await s(),c(),a(!1),this.popupDispatcher.nativeClick(!0)});t&&this.init(e,t)}}}}},handleFocus:function(){window.addEventListener("focus",function(t){t.stopImmediatePropagation()},!0)},listenEvents:function(){var t;let e;var r={capture:!0,passive:!1};const n=function(t){window.OCUDisableEvents||this.handleClick(t)}.bind(this),i=OCUApi.isWindowLocationForClickListener?window:document;document.addEventListener("mousedown",this.integrations.amazonPay.bind(this),!0),i.addEventListener("click",n,!0),window.addEventListener("pagehide",this.helpers.disableButtons),i.addEventListener("touchend",t=>{e||n(t)},r),i.addEventListener("touchmove",()=>{e=!0},r),i.addEventListener("touchstart",()=>{e=!1},r),window.addEventListener("locationchange",function(){i.removeEventListener("click",n,!0),i.addEventListener("click",n,!0)}.bind(this)),window.addEventListener("pageshow",function(t){t.persisted&&!OCUApi.preventReloadPersistedPage&&location.reload(),this.helpers.disableButtons()}.bind(this)),null!==(r=(t=OCUApi).listenFormEvents)&&void 0!==r&&r.call(t)}};const appendChain=window.Symbol?Symbol("appendChain"):"oneClickUpsellAppendChain";function Updater(t){this.res=t,this.isCartUpdated=utils.store.get("cartUpdated"),this.isOfferDeclined=utils.store.get("offerDeclined"),this.options={add:{method:"post",url:"/cart/add.js"},change:{method:"post",url:"/cart/change.js"},update:{method:"post",url:"/cart/update.js"}},this.regs={attributes:/\[(.+?)\]/,key:/(?:(?:updates|quantity)_(?:.*?))?(\d+:\w+)/,id:/(?:(?:updates|quantity)_(?:.*?))?(\d+):?/,noId:/(\d+(:\w+)?)$/},this.selectors={form:'form[action^="/checkout"], form[action^="/cart"]',attributes:'[name^="attributes["]',currency:'[name="currency"]',localization:'form[action="/localization"]',geolocation_currency:'input[name="currency_code"]',updates:'[name^="updates["], [data-cart-item-input-quantity], [data-cart-item-quantity], input[data-line], [name="quantity"], [data-quantity-input]'+(OCUApi.customQuantityInput||""),note:'[name="note"]',noteOutOfForm:'[form="cart"][name="note"]',cartItemKey:"[data-cart-item-key], [data-cart-item], [data-variant]"},this.data={currency:Shopify.currency.active!==lqd.shop_currency?Shopify.currency.active:lqd.shop_currency,attributes:{},lineItems:[],updates:{},changes:[],sameIds:[],note:""},this.payload={updates:{},currency:"",note:null,attributes:{}},window.klpixel||OCUApi.preventRestoreXMLHttp||this._restoreXMLHttp()}Object[appendChain]=function(t,e){for(var r=e,n=o2nd=oLast=t instanceof this?t:new t.constructor(t),i=this.getPrototypeOf(o2nd);i!==Object.prototype&&i!==Function.prototype;i=this.getPrototypeOf(o2nd))o2nd=i;return e.constructor===String&&(r=Function.prototype,n=Function.apply(null,Array.prototype.slice.call(arguments,1)),this.setPrototypeOf(n,oLast)),this.setPrototypeOf(o2nd,r),n},Updater.prototype={init:function(){return this.isCartUpdated&&!this.isOfferDeclined?this.resolve(this.res):this.form?(this.buildPayload(),this.res?this.updateCart():void 0):this.updateCurrency()}};const UpdaterRequests={updateCart:function(t,e){const r=this._getOptions("update",t,e);t=e&&t.changeData;return this._updateSameId(t).then(function(){return ajax.request(r)})},addToCart:function(t){var e,r=this._getOptions("add",t);return null!==(e=null===(t=(e=OCUApi).customAddToCartFetch)||void 0===t?void 0:t.call(e,r))&&void 0!==e?e:ajax.request(r)},changeCart:function(t,e){const r=this._getOptions("change",t);return!e||e instanceof Object?ajax.request(r):function(){return ajax.request(r)}},updateCurrency:function(){if(!this.needCurrencyUpdate)return this.resolve(this.res);this.getCurrency();var t=this._getOptions("update",{currency:this.data.currency});return ajax.request(t).catch(this.resolve.bind(this,this.res))},_updateSameId:function(t){if(!this.data.sameIds.length||!t)return this.resolve(!1);t=this._getCartChangeRequests(t);const e=this._requestChain(t);return new Promise(e.bind(this))},_getCartChangeRequests:function(i){return this.data.changes.reduce(function(t,e){if(!e.id&&!e.line)return t;if(i){var r=i.id,n=i.__line||i.line;if(e.line===n||r&&e.id===r)return t}return delete e.__variantId,t.push(this.changeCart(e,"chain")),t}.bind(this),[])},_requestChain:function(i){return function(r,n){if(!i.length)return r(!1);!function e(){const t=i.pop();return t().then(function(t){if(i.length)return e();r(t)}).catch(n)}()}},_getOptions:function(t,e,r){const n=Object.assign({},this.options[t]);return n.data=r?e.updateData:e||this.payload,n}},UpdaterPayload={buildPayload:function(){return this.getUpdates(),this.getAttributes(),this.getCurrency(),this.getNote(),Object.keys(this.payload).forEach(function(t){this.payload[t]=this.data[t]}.bind(this)),this.payload},getUpdates:function(){return this.updateElements.forEach(function(t){if(t){var e=!(t.dataset.id||t.dataset.key||this.regs.noId.test(t.id)||this._getClosestKey(t)),r=parseFloat(t.value),n=this._getLine(t);if(e)return this._saveLineItem(null,null,n,r);e=this._getKey(t);const i=this._getId(t);t=i.toString().length<3;this._saveLineItem(i,e,n,r),(this.data.updates[i]||t)&&this._saveSameId(i),this._saveChanges(),~this.data.sameIds.indexOf(i)||t||this._saveUpdates(i,r)}}.bind(this)),this.data.updates},getAttributes:function(){if(!this.attributesElements.length)return{};return this.data.attributes=this.attributesElements.reduce(function(t,e){var r=this._getAttribute(e);return r.key&&(/radio|checkbox/.test(e.type)&&!e.checked||(t[r.key]=r.value)),t}.bind(this),{}),this.data.attributes},getCurrency:function(){return this.currencyElement&&(this.data.currency=this.currencyElement.value),this.data.currency},getNote:function(){return this.noteElement?(this.data.note=this.noteElement.value,this.data.note):""}},UpdaterPrecheckout={acceptAddOffer:function(t,e){const r=this.addToCart.bind(this,t);return e?r():this.updateCart().then(r)},acceptUpgradeOffer:function(){try{return this._vintageUpgrade(...arguments)}catch(t){return console.log("os2 used"),this._os2Upgrade(...arguments)}},_os2Upgrade:function(t,e,r){var n,i,o=this;return(null!==(i=null===(n=(i=OCUApi).customUpdateCart)||void 0===n?void 0:n.call(i))&&void 0!==i?i:this.updateCart(new FormData(this.form))).then(t=>function(){var t=((t,e,r)=>{t=t.items.find(t=>{var{key:t}=t;return t===e.key});return t?{line:r,quantity:t.quantity-1}:null})(...arguments);return t&&!OCUIncart._is_product_action&&o.changeCart(t)}(t.data,e,r)).then(()=>this.addToCart(t)).catch(t=>console.log(t))},_vintageUpgrade:function(t,e,r){r=this._getUpgradeOfferData(e,r);const n=Object.assign({},r.changeData);return delete n.__line,this.updateCart(r,"upgrade").then(()=>OCUIncart._is_product_action?this.addToCart(t):this.changeCart(n).then(this.addToCart.bind(this,t)))},_getUpgradeOfferData:function(e,r){const t=Object.assign({},this.payload);var n=this.data.lineItems.find(function(t){return t.id===e.key}),i=this.data.lineItems.find(function(t){return t.__variantId===e.id}),o=this.data.lineItems.find(function(t){return t.line===r}),o=n||i||o,o=o.quantity?o.quantity-1:0,o={line:r,quantity:o};return delete t.updates[e.id],{updateData:t,changeData:o}}},UpdaterElements={get forms(){var t=document.querySelectorAll(this.selectors.form);return Array.from(t).filter(function(t){return t.offsetHeight||this._isVisible(t)}.bind(this))},get form(){const r=this.forms.some(function(t){return t.note&&t.note.value});var t=this.forms.find(function(t){return!/add|change|update/.test(t.action)&&t.querySelector(this.selectors.updates)&&(!r||t.note&&t.note.value)&&(t=!!(e=t).closest(".cv_outer_cart_drawer"),e=!!e.querySelector('[id="pro_quantity"]'),!(t&&e));var e}.bind(this)),e=null!==(e=OCUApi.customCheckoutDuplicatedForm)&&void 0!==e?e:OCUApi.customCheckoutForm,e=document.querySelector(e);return!OCUApi.customCheckoutDuplicatedForm&&null!=t?t:e},get updateElements(){const t=Array.from(this.form.querySelectorAll(this.selectors.updates));return t.filter(function(t){return t&&!t.disabled&&!t.dataset.removedItemRow&&!t.closest(OCUApi.excludeUpdateElement)}).map(function(t){var e=t.querySelector("input");return e||t})},get attributesElements(){var t=this.form.querySelectorAll(this.selectors.attributes);return Array.from(t)},get noteElement(){return this.form.querySelector(this.selectors.note)||document.querySelector(this.selectors.noteOutOfForm)},get currencyElement(){return document.querySelector(this.selectors.currency)||this._geolocationElement},get _geolocationElement(){var t=document.querySelectorAll(this.selectors.localization);const e=Array.from(t).find(t=>t.offsetHeight||this._isVisible(t));return e&&e.querySelector(this.selectors.geolocation_currency)}},UpdaterHelpers={resolve:function(e){return new Promise(function(t){t(e)})},_getLine:function(t){return+(t.dataset.quantityItem||t.dataset.lineId||t.dataset.line||t.closest("[data-line]")&&t.closest("[data-line]").dataset.line)},_getKey:function(t){const e=this.regs.key.exec(t.dataset.id||t.dataset.key||t.id||this._getClosestKey(t));return e&&e[1].split("_")[0]},_getId:function(t){t=this.regs.id.exec(t.dataset.variant||t.dataset.id||t.dataset.key||t.id||this._getClosestKey(t));return t&&+t[1]},_saveSameId:function(t){delete this.data.updates[t],this.data.sameIds.push(t)},_saveLineItem:function(t,e,r,n){const i={__variantId:t,quantity:n};r?i.line=r:e&&(i.id=e),this.data.lineItems.push(i)},_saveChanges:function(){this.data.changes=this.data.lineItems.filter(function(t){return~this.data.sameIds.indexOf(t.__variantId)}.bind(this))},_saveUpdates:function(t,e){this.data.updates[t]=e},_getAttribute:function(t){var e=this.regs.attributes.exec(t.name);return e?{key:e[1],value:t.value}:{}},_isVisible:function(t){t=window.getComputedStyle(t);return"block"===t.display&&"visible"===t.visibility},get needCurrencyUpdate(){return this.currencyElement&&this.currencyElement.value!==this.data.currency},_getClosestKey:function(t){t=t.closest(this.selectors.cartItemKey);if(t){const e=["cartItemKey","cartItem","variant"];return t.dataset[Object.keys(t.dataset).find(function(t){return e.includes(t)})]}},_restoreXMLHttp:function(){try{XMLHttpRequest.prototype.open=openReplacement,XMLHttpRequest.prototype.send=originSend}catch(t){console.log(t)}}};function Cart(){var i=this;this.add=function(t,e,r){var n;return t&&(!(n=function(t){return!/id/.test(t)})(r=i.serialize(t))||(t=document.querySelector("#AddToCartForm"))&&(r=i.serialize(t)),!n(r)||(n=document.querySelector("[data-cart-add]"))&&(r="id="+n.dataset.cartAdd)),ajax.request({method:"post",url:"/cart/add.js",data:r})},this.bulkAdd=function(t){return ajax.request({method:"post",url:"/cart/update.js",data:t})},this.get=function(t){return ajax.request({method:"get",url:"/cart.js"+("string"==typeof t?t:"")})},this.update=function(t){return new Updater(t).init()},this.createToken=function(){var t=!!lqd.cart.token,e=lqd.cart.token!==utils.cookie.get("cart"),r=!lqd.cart.line_items||0===lqd.cart.line_items.length;if(t||e||r)return ajax.request({method:"post",url:"/cart/update.js",data:{updates:{}}})},this.save=function(t){return i.disableMultiUpdate(t.data.cart.items),i.saveTags(t),lqd.cart_products_json=t.data.cart_products,lqd.cart_collections_json=t.data.cart_collections,lqd.subscription_products_json=t.data.subscription_products,lqd.subscription_variants_json=t.data.subscription_variants,i.resolve(t)},this.modify=function(t){var e=t.cart||t.data.cart||t.data;return t.data=e,t.data.subscription_products=lqd.subscription_products_json,t.data.cart_collections=lqd.cart_collections_json,t.data.cart_products=lqd.cart_products_json.filter(function(t){return!t.error}),t.data.customer_id=lqd.customer_id,t=i.helpers.addBuyXGetYDiscount(t),e.cart_level_discount_applications&&(t.data.automatic_discount=e.cart_level_discount_applications[0]),t},this.serialize=function(t){return/trident|edge/i.test(navigator.userAgent)?utils.serializeFormEdge(t):utils.serializeForm(t)},this.attrubutes=function(t){ajax.request({method:"post",url:"/cart/update.js",data:{attributes:t}})},this.prepareUpdate=function(t){return t=t.length?t:[t],{updates:Array.prototype.reduce.call(t,function(t,e){return t[e.id.replace(/(\w+_)(\d+)(:\w+)/,"$2")]=e.value,t},{}),currency:lqd.shop_currency}},this.saveTags=function(t){t=t.data.cart_products.reduce(function(t,e){return t.concat(e.tags)},[]);utils.store.set("tags",t)},this.disableMultiUpdate=function(t){var e=document.querySelectorAll('input[name="updates[]"]'),r="add"===utils.store.get("offer");r&&t.length===e.length+1||!r&&t.length===e.length||Array.prototype.forEach.call(e,function(t){t.offsetHeight||(t.disabled=!0)})},this.state=function(t){"updates[]"===t.target.name&&utils.store.set("cartChanged",!0)},this.resolve=function(e){return new Promise(function(t){t(e)})},this.needCurrencyUpdate=function(){return document.querySelector('[name="currency"]')},this.updateCurrency=function(){var t={method:"post",url:"/cart/update.js",data:{currency:lqd.shop_currency}};ajax.request(t).then(function(){utils.store.set("cartChanged",!1)})},this.isNotePresent=function(t){return Array.prototype.some.call(t,function(t){return t.note&&t.note.value})},this.filterFormsIfNotes=function(t,e){return Array.prototype.filter.call(t,function(t){return t["updates[]"]&&(!e||t.note&&t.note.value)})[0]},this.error=function(t){var e=t.data.description;if(422!==t.status)return alert(e||"Something went wrong. Please try again.");var r=/all/i.test(e),t=/sold out/i.test(e);if(alert(e),r)return i.checkout({redirect:!0});t&&location.reload()}}[UpdaterRequests,UpdaterPayload,UpdaterPrecheckout,UpdaterElements,UpdaterHelpers].forEach(function(t){Updater.prototype=Object[appendChain](Updater.prototype,t)});var SyncQtyFields={init:function(){this.fields.length&&this.listenEvents()},get fields(){return document.querySelectorAll("[data-quantity-item]")},getFiledsForUpdate:function(t){t=this.getId(t),t=document.querySelectorAll('[data-quantity-item="'+t+'"]');return this.getArray(t)},getId:function(t){return t.dataset.quantityItem},getArray:function(t){return Array.prototype.slice.call(t)},update:function(t,e){this.getFiledsForUpdate(t).forEach(function(t){t.value=e})},handle:function(t){this.update(t.target,t.target.value)},listenEvents:function(t){this.getArray(this.fields).forEach(function(t){t.addEventListener("input",this.handle.bind(this))}.bind(this))}}.init();function SkipCart(){var i=this;this.init=function(){var t=/index|collection|product/.test(lqd.template_name);lqd.skip_cart&&t&&setTimeout(i.prepare)},this.prepare=function(){Array.prototype.forEach;const r=function(t){return Array.prototype.slice.call(t)};var t=r(document.querySelectorAll(".product-form__cart"));let e=r(document.querySelectorAll('form[action*="cart"], [data-zp-add-to-cart-form], #AddToCartForm1'));e=e.filter(function(t){return"zipify_page"!==t.dataset.zpLinkType}),t.length&&(e=e.concat(t)),e.forEach(function(t){const e=r(t.querySelectorAll('*[type="submit"], input[type="button"], button'));e.forEach(function(t){t.dataset.pfType&&"ProductATC"!==t.dataset.pfType||/plus|minus|zpa-quantity/.test(t.className)||/error_txt|quantity|sold-out/i.test(t.id)||/amount|review/i.test(t.value)||t.dataset.qty||t.dataset.quantityAction||t.getAttribute("aria-controls")||"product"===t.dataset.zpLinkType||t.closest("quantity-input, cart-remove-button")||(t.removeAttribute("onclick"),t.dataset.skipCart=!0,t.type="button")})}),i.listenEvents(e)},this.handle=function(r){var n,t=i.handleZPEvent(r);if(!t&&(null!==(t=(n=OCUApi).customButtonLoader)&&void 0!==t&&t.call(n,r),i.popupDispatcher.target||(i.popupDispatcher.target=r.target),!i.popupDispatcher.isProductAction||i.popupDispatcher.secondAttempt)){let t=r.target.dataset.skipCart?r.target:null;if(t=t||r.target.closest("[data-skip-cart]"),!t)return i.popupDispatcher.target=null;t.disabled=!0,r.stopImmediatePropagation(),r.stopPropagation(),r.preventDefault();let e=t.closest("form");e=e||document.querySelector('form[action="/cart/add"]'),i.cart.add(e,t,null===(r=(n=OCUApi).getCustomAddToCartData)||void 0===r?void 0:r.call(n).payload).then(i.cart.get).then(i.onSuccess).catch(i.onError.bind(null,e))}},this.onSuccess=function(t){if(OCUApi.fireAddToCartEvent&&OCUApi.fireAddToCartEvent(t.data),utils.store.set("cart_token",t.data.token),i.helpers.isSubscriptionProductInCart(t.data))return location="/cart";i.checkout({redirect:!0})},this.onError=function(t){t.submit()},this.listenEvents=function(t){document.addEventListener("click",i.handle,!0)},this.handleZPEvent=t=>{var e=t=>void 0!==t.dataset.zpAddToCart;const r=t.target,n=e(r)?r:r.closest("[data-zp-add-to-cart]");return!!(n&&t.isTrusted&&e(n))&&(n.type="submit",n.click(),!0)},this.init()}function BuyNow(t,e){const r=this;var n;lqd.themePopup&&lqd.isThemePopupTag||!t.isTrusted||(n=t.target.closest('form[action="/cart/add"]')||document.querySelector('form[action="/cart/add"]'))&&(t.stopImmediatePropagation(),t.preventDefault(),t.target.disabled=!0,r.cart.add(n,t.target).then(function(){r.checkout({redirect:!0})}).catch(function(t){t.submit()}.bind(null,n)))}function PublicMethod(){const o=this,r=o.__proto__.__proto__,i=OCUIncart.integrations();let a=!1;this.init=function(){window.oneClickUpsellGetCheckoutUrl=r.checkout=o.create,r.verify=o._verify.bind(this)},this.create=async function(e){if(!a){if(a=!0,"skip_cart"===e)return new Promise(function(t){t(lqd.skip_cart)});var t=utils.cookie.get("ocu_progress_bar")&&utils.cookie.get("ocu_progress_bar").length,r=OCUIncart.hasNotOfferInCart,n=utils.cookie.get("ocu_header"),i=e&&e.redirect_url;return!r&&!i||n||t?(e.discount&&utils.cookie.set("ocu-share-discount",e.discount),OCUIncart.hasWidgetOffersInCart&&(t=await o.cart.get(),OCUIncart.cart_items=t.data.items),o._verify().then(function(t){return o._checkout(Object.assign(e,{redirect_url:t.data.redirect_url||lqd.checkoutUrl,verified:t.data.verified}))}).catch(function(){o._checkout(e)})):o._checkout(e)}},this.prepare=function(t){const e=utils.store.get("params");o.config=t||{},o.config.discount&&utils.cookie.set("ocu-share-discount",t.discount),o.config.incarts&&utils.store.set("incarts",o.config.incarts),o.config.path&&utils.store.set("amazonPath",o.config.path),o.config.button&&o.helpers.payPal(o.config.button),o.integrations.discounts(),o.params(),o.handleDeclineOffer(t),i.tidio.present&&i.tidio.track(),OCUApi.preventReloadPersistedPage&&(a=!1),e.str=e.str?"?"+e.str:"",o.config.checkoutUrl=(o.config.redirect_url||lqd.checkoutUrl)+e.str,utils.store.set("params",e)},this.redirect=function(t){const e=o.integrations.recharge,r=i.bundlerBuilder;return r.present?r.submit():e.isSubscription(lqd)?e.redirect(null,null,t.checkout_url):"checkout"===t.destination||lqd.skip_cart?location.assign(t.checkout_url):void location.assign("/"+t.destination)},this._checkout=function(t){o.prepare(t);const e={status:!1,verified:t.verified,checkout_url:o.config.checkoutUrl,skip_cart:lqd.skip_cart,get redirect_url(){return this.checkout_url},destination:r.popupDispatcher.destination};return o.config.redirect?this.redirect(e):new Promise(function(t){t(e)})},this._verify=function(){var t=window.OCUIncart&&OCUIncart.appEndpoint,e={"Content-Type":"application/json","Shop-Domain":lqd.permanent_domain};return OCUApi.axios.post(t+"/pre_purchase/v1/draft_orders/verify",this._verifyPayload(),{headers:e})},this._verifyPayload=function(){var t=utils.cookie.get("cart"),e=o.helpers.getCartItems(null!==(i=OCUApi.cart)&&void 0!==i?i:OCUIncart.cart_items);const r={checkout:{line_items:e=o.integrations.zipifyPages.appendZipifyPagesProduct(e.line_items)}};var n=+utils.cookie.get("ocu_progress_bar"),i=OCUIncart.header_type||utils.cookie.get("ocu_header");return r.checkout=Object.assign(r.checkout,{cart_token:t,verify_draft_order:!0,note:lqd.cart.note,attributes:lqd.cart.attributes,currency_rate:window.Shopify&&Shopify.currency&&+Shopify.currency.rate||1,threshold:n,header_type:i,selling_plan:o.helpers.hasSellingPlan(e)}),r.currency=this.helpers.currencyRate(),r.customer_tags=lqd.customer_tags||[],r.customer_location=OCUIncart.customer_location.handle,r.snippet_version=OCUIncart.version,r},this.params=function(){const e=utils.store.get("params"),n=i.zapiet,t=i.simpleInStorePickup,r=i.weglot;n.present&&(o.config.params=n.merge(o.config.params)),t.present&&(o.config.params=t.merge(o.config.params)),r.present&&(o.config.params=r.merge(o.config.params)),(o.config.params||[]).concat(o.gaLinker()).concat({t:+Date.now()}).map(function(r){return Object.keys(r).map(function(t){var e="discount"===t||n.present?r[t]:encodeURIComponent(r[t]);return{name:encodeURIComponent(t),value:e}})[0]}).forEach(function(t){e.arr.push(t)}),utils.store.set("params",e),o.helpers.params()},this.handleDeclineOffer=function(e){var t;!e||e&&!e.incarts||(t=Object.keys(e.incarts).some(function(t){return"declined"===e.incarts[t].status}),utils.store.set("offerDeclined",t))},this.gaLinker=function(){try{const e=ga.getAll()[0].get("linkerParam");var t=e.split("=");const r={};return r[t[0]]=t[1],[r]}catch(t){return[]}},this.init()}function Helpers(){var a=this;this.disableButtons=function(){utils.store.set("checkoutButtonState",!1)},this.params=function(){for(var t=utils.store.get("params"),e=0;t.arr.length>e;e++)new RegExp(t.arr[e].name).test(t.str)||(t.str+=t.arr[e].name+"="+t.arr[e].value,e+1!==t.arr.length&&(t.str+="&"));utils.store.set("params",t)},this.redirect=function(t){if(t.redirect_url)return location.assign(t.redirect_url);if(!lqd.subscription_products_size)return location.assign(t.checkout_url);const e=document.querySelector('form[action="/checkout"], form[action="/cart"]');if(!e)return a.checkout({redirect:!0});e.submit()},this.simulateSubmit=function(){var t=document.querySelectorAll(a.ocuSelectors);if(!t.length)return location="/cart";Array.prototype.slice.call(t,-1)[0].dispatchEvent(new MouseEvent("click"))},this.simulateDocumentClick=function(){var t=new Event("click"),e=document.createElement("button");e.type="submit",e.name="checkout",Object.defineProperty(t,"target",{value:e}),document.dispatchEvent(t)},this.preventMouseDown=function(t){t.preventDefault(),t.stopPropagation()},this.payPal=function(t){var e;"goto_pp"===t.name&&"paypal_express"===t.value&&((e=utils.store.get("params")).arr.push({name:t.name,value:t.value}),utils.store.set("requirePayPal",!0),utils.store.set("params",e))},this.filterFields=function(t){var e=utils.store.get("neededCartFileds"),r=utils.store.get("neededCartItemsFields");return(t=utils.filterObject(t,e)).items=t.items.map(function(t){return utils.filterObject(t,r)}),t},this.filterCartItemFields=function(t){return t.map(function(r){return Object.keys(r).reduce(function(t,e){return"product_description"===e||(t[e]=r[e]),t},{})})},this.checkSelector=function(e){if(e.closest(OCUApi.excludeActionButton))return null;if("true"===e.dataset.ocuCheckout)return e;var t=t=>{t=e.closest(t);return t&&"FORM"!==t.tagName?t:null},r=document.querySelectorAll(a.ocuSelectors),n=Array.prototype.some.call(r,function(t){return t===e}),i=e.closest(".cart_content")&&e.closest('form[action="/checkout"] [type="submit"]'),o="cart"===lqd.template_name&&e.closest('form[action="/cart"] [type="submit"]'),r=t(a.ocuSelectors)||i||o,i=!e.closest(".nudge-offer"),o="product"===lqd.template_name&&!e.closest('form[action$="/cart/add"]')&&(("add"===e.name&&"submit"===e.type?e:null)||e.closest('[name="add"]')&&e.closest('[type="submit"]')),o=!n&&(r||t('[name="checkout"]'))||o;return(n||o)&&i?n?e:o:void 0},this.checkDirectCheckoutButtons=function(t){return/\/checkout/.test(t.onclick&&t.onclick.toString())},this.checkAddToCart=function(t){if(t.closest(OCUApi.excludeActionButton))return null;var e=/^(submit|add|checkout)$/.test(t.name)||this.isActionButton(t);if(e&&OCUApi.customAddToCartButton)return t;if(this.isShopPayInstallments({target:t}))return t;var r=OCUApi.customAddToCartForm||'form[action*="/cart/add"]';return(e||this.isBuyNow({target:t}))&&t.closest(r)},this.zpPreventRedirect=function(t){if("crm_dest"===t.dataset.type||""===t.dataset.zpProductRedirectLink||""===t.dataset.zpAddToCart||t.closest('[data-type="crm_dest"]')||t.closest("[data-zp-product-redirect-link]")||t.closest("[data-zp-add-to-cart]"))return!0},this.isOfferProduct=function(){return lqd.cart_variants_json.some(function(t){return t.properties&&t.properties._ocu_offer_id})},this.addBuyXGetYDiscount=function(t){var e=t.data.items.reduce(function(t,e){if(!e.discounts[0])return t;let r={item_key:e.key,discount:e.discounts};return e.line_level_discount_allocations[0]&&(r.discount_data=e.line_level_discount_allocations),t.push(r),t},[]);return e.length&&(t.data.per_item_discounts=e),t},this.isActionButton=function(r){const t=['[type="submit"]','[name="add"]','[name="checkout"]','[data-skip-cart="true"]'];return OCUApi.customAddToCartButton&&t.push(OCUApi.customAddToCartButton),t.reduce(function(t,e){e=r.closest(e);return t=e&&"FORM"!==e.tagName?!0:t},!1)},this.isBuyNow=function(t){if(!t)return!1;var e=utils.store.get("classList");return t.target.classList.contains(e.buyNow)&&!t.target.classList.contains(e.buyNowBranded)||!!t.target.closest(e.customBuyNowButton)||this.isShopPayInstallments(t)},this.isShopPayInstallments=function(t){var{parent:e}=utils.store.get("shopPayInstallments");return!!t&&t.target.closest(e)},this.getCartItems=function(t){const e=["key","properties","quantity","variant_id","product_id","price","original_price","discounted_price","line_price","original_line_price","final_price","final_line_price","handle","title","options_with_values","selling_plan_allocation"];return{line_items:t.map(function(r){return e.reduce(function(t,e){return t[e]=r[e]||0===r[e]?r[e]:{},t},{})})}},this.isSameCart=function(t){var e=utils.cookie.get("ocu_cart_items"),t=t.items.map(t=>t.key);if(utils.cookie.set("ocu_cart_items",JSON.stringify(t)),!e)return!1;t=new Set(t),e=new Set(JSON.parse(e));return this.areSetsEqual(t,e)},this.isSameCartToken=function(t){return t.token===utils.cookie.get("ocu_popup_token")},this.areSetsEqual=function(t,e){return t.size===e.size&&Array.from(t).every(t=>e.has(t))},this.isSubscriptionProductInCart=function(t){return t.items.reduce(this.isSubscriptionItem,null)},this.isSubscriptionItem=function(t,e){var r=utils.store.get("subscriptionProperties");let n=t;return Object.entries(r).some(function(t){return t[1].some(function(t){return e.properties&&e.properties[t]})&&!e.selling_plan_allocation&&(n=t[0]),n}),n},this.showCheckoutButton=function(){var t=utils.store.get("checkoutButton");const e=document.querySelector(t.selector);var r=OCUIncart.integrations().exemptify;e&&!r.present&&Object.entries(t.excludes).every(function(t){return!t[1].test(e[t[0]])})&&"none"===e.style.display&&(e.style.display="inline-block")},this.clearFallback=function(){var t=utils.store.get("fallback").id;clearTimeout(t)},this.beforeCreate=function(){var t,e;if(utils.store.get("salesRocketIntegrationApplied")){const a=document.querySelector(utils.store.get("cartDrawerSalesRocketControl").selector);a&&a.click()}const r=document.querySelector(utils.store.get("cartDrawerTimberControl").selector);r&&r.click();const n=document.querySelector(utils.store.get("cartDrawerControl").selector);n&&n.click();const i=document.querySelector(utils.store.get("chatButton").selector);i&&i.remove();const o=document.querySelector(OCUApi.customCartDrawerCloseButton);o&&o.click(),null!==(t=(e=OCUApi).beforeCreate)&&void 0!==t&&t.call(e)},this.isDisabledButton=function(t){if(OCUApi.isButtonDisabledAfterClick)return!1;var e=t.closest("button"),e="button"===t.tagName.toLowerCase()?t:e;return e&&(e.disabled||!!e.ariaDisabled)},this.termsOfServiceConfirmation=function(t){const e=t.closest('form[action="/checkout"], form[action="/cart"]');t=e&&e.querySelector(utils.store.get("termsOfServiceCheckbox").selector);return t&&!t.checked},this.isCartPopupRedirectsToCart=function(t){if(t.target.dataset.ocuCheckout&&"cart"!==lqd.template_name)return Shopify.theme_settings&&!1===Shopify.theme_settings.go_to_checkout},this.removeExtraClassList=function(t){var e;t&&(e=utils.store.get("extraClassListToRemove").join(","),t.classList.remove(e))},this.currencyRate=function(){var t;return(null===(t=Shopify)||void 0===t?void 0:t.currency)||{}},this.getLocation=function(){return OCUApi.axios.get("/browsing_context_suggestions.json").then(t=>{var e;return OCUIncart.customer_location=(null===(t=t.data)||void 0===t||null===(e=t.detected_values)||void 0===e?void 0:e.country)||{handle:null}}).catch(()=>OCUIncart.customer_location={handle:null})},this.preventFallbackRedirect=function(){clearTimeout(utils.store.get("fallback").id)},this.deepEqual=function t(e,r){function n(t){return null!=t&&"object"==typeof t}if(!e||!r)return!1;var i=Object.keys(e),o=Object.keys(r);if(i.length!==o.length)return!1;for(const u of i){var a=e[u],s=r[u],c=n(a)&&n(s);if(c&&!t(a,s)||!c&&a!==s)return!1}return!0},this.getCustomAddToCartData=function(t){let{shopPayInstallments:e,event:r}=t;var t=null===(n=(i=OCUApi).getCustomAddToCartData)||void 0===n?void 0:n.call(i,r);if(t||!e)return null!=t?t:{};var{attr:n}=utils.store.get("shopPayInstallments"),i=e.getAttribute(n.token),[t,n]=null!==(n=null===(t=e.getAttribute(n.variant))||void 0===t?void 0:t.split(":"))&&void 0!==n?n:[];return{id:t,quantity:n,token:i}},this.hasSellingPlan=function(t){return!!t.find(t=>{var e;if(null!==(e=t.properties)&&void 0!==e&&e._ocu_offer_id&&Object.keys(t.selling_plan_allocation).length)return t})},this.listenWidgetEvent=function(){document.addEventListener("OCUWidgetReady",()=>{console.log("[WIDGET PROCEED VIA EVENT]"),OCUIncart.productPageWidget.setData()})}}function ApplicationsUtils(){const t={overlay:".slidecarthq-overlay",cartDrawer:"[cart-drawer-show], .slidecarthq, #sidebar-cart",chatWindow:"#chat-window",chatButton:"#chat-button"};this.beforePrecheckoutPopup=function(){this.adjustZIndex(),this.hideSlidecart()},this.adjustZIndex=function(){Object.values(t).forEach(function(t){const e=document.querySelector(t);e&&(e.style.zIndex=1e3)})},this.hideSlidecart=function(){this.isMobile()&&window.SLIDECART_STATE&&window.SLIDECART_STATE().open&&window.SLIDECART_CLOSE&&SLIDECART_CLOSE()},this.isMobile=function(){return/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Mobile|Opera Mini/i.test(navigator.userAgent)}}function initApplication(){var t=new Application;return OCUApi.initialize({context:t}),t}function loadAxios(t){const e=document.createElement("script"),r=ocuCdn+"/vendor/axios.min.js";e.src=r,e.onload=()=>{if(window.axios)return t();requireJsAxios(r,t)},document.head.append(e)}function requireJsAxios(t,e){var r,n;null!==(r=(n=window).require)&&void 0!==r&&r.call(n,[t],t=>{window.axios=t,e()})}function replaceCurrencyFormat(){window.Shopify&&Shopify.money_format&&(Shopify.money_format=OCUIncart.money_format)}function Store(){const r={store:{ocuSelectors:'[name="checkout"], [href^="/checkout"], form[action^="/checkout"] [type="submit"], form[action$="/cart"] [type="submit"], #checkout, [name="goto_pp"], .checkout_button, .checkout-button, [value="Checkout"], .cart-button-checkout, #btn-checkout, .btn__checkout.js-prefill-url, form[action^="/checkout"] .chk_out, form[action^="/cart"] .chk_out, form[action^="/cart"] .cart__checkout, form[action^="/cart"] .ajaxcart__checkout.ajax-cart__button, form[action^="/cart"] .btn-checkout, #rebuy-cart .rebuy-cart__flyout-footer .rebuy-cart__checkout-button, #slidedown-cart .actions .btn.btn-checkout',addToCartButton:'[name="add"]',proxy:"/apps/secure-checkout",lqdCart:"/upsellapp_cart",checkUpsells:"/check_upsells",excludedRequiredFormIds:["cbb-shipping-rates-calculator-form"],neededCartFileds:["token","note","attributes","items","currency","cart_level_discount_applications"],neededCartItemsFields:["product_id","variant_id","quantity","grams","price","line_price","title","properties","vendor","sku","key"],permalink:/cart\/(\d+:\d+(?:,\d+:\d+)*)(?:[?&]discount=([-\w! %205]+))*/,subscriptionProperties:{recharge:["subscription_id","shipping_interval_frequency","shipping_interval_unit_type"],bold:["frequency_num","frequency_type"]},isAddToCartClicked:!1,cartChanged:!1,cartUpdated:!1,requirePayPal:!1,checkoutButtonState:!1,submitted:!1,amazonPayInitiated:!1,salesRocketIntegrationApplied:!1,redirect_url:null,offer:null,offerDeclined:!1,incarts:{},tags:[],isPermalinkHandling:!1,isTargetBuyNow:!1,cart_token:null,classList:{buyNow:"shopify-payment-button__button",buyNowBranded:"shopify-payment-button__button--branded",customBuyNowButton:OCUApi.customBuyNowButton},params:{str:"",arr:[]},fallback:{timeout:15e3,id:0},XHR:{send:XMLHttpRequest.prototype.send},checkoutButton:{selector:"[data-ocu-checkout]",excludes:{tagName:/^P$/,id:/^ProceedToCheckout(Top|Bottom)$/}},cartDrawerControl:{selector:'[data-action="close-drawer"][data-drawer-id="sidebar-cart"], #CartDrawer .drawer__close-button, #CartDrawer .js-drawer-close'},cartDrawerSalesRocketControl:{selector:"#cartSlider-shopper .ws-cs-close"},cartDrawerTimberControl:{selector:"#CartDrawer .js-drawer-close button"},chatButton:{selector:"#shopify-chat"},termsOfServiceCheckbox:{selector:".cart__terms-checkbox"},productLocation:{variant_id:null,product_id:null},extraClassListToRemove:["hulkapps_submit_cart"],shopPayInstallments:{id:"shop-pay-button-link",parent:"#shopify-payment-terms-modal shop-pay-button",query:"payment=shop_pay_installments&source=installments_modal&source_token",checkoutUrl:"/checkout?payment=shop_pay_installments&source=installments_modal&source_token",attr:{variant:"variants",token:"source-token"}},pagesIntegrationData:{},productPageWidget:{},widgetHandled:!1},event:function(t){return new Event("store:"+t)},emit:function(t){document.dispatchEvent(this.event(t))}};this.get=function(t){return r.store[t]},this.set=function(t,e){if(!r.store.hasOwnProperty(t))return console.error("Unavailable key! ",t);r.emit(t),r.store[t]=e},this.listen=function(e){return new Promise(function(t){document.addEventListener("store:"+e,t)})}}[Helpers,Integrations,Cart,PublicMethod,SkipCart,BuyNow].forEach(function(t){Object.setPrototypeOf(t.prototype,Application.prototype)}),OCUApi.axios||window.axios?initApplication():loadAxios(initApplication);
}();
</script>
{% endunless %}
