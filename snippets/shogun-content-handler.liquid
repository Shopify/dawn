{% comment %}
Auto-generated by Shogun.
This file can be re-written at any time.
{% endcomment %}

{% assign template_suffix = template.suffix %}

{% if article %}
  {% assign content = article %}
{% elsif page %}
  {% assign content = page %}
{% elsif product %}
  {% assign content = product %}
{% elsif collection %}
  {% assign content = collection %}

{% endif %}

{% capture content_for_header %}
  {{ content_for_header }}
  {% render 'shogun-products', content: content %}
{% endcapture %}

{% if content.metafields.shogun.json_template_snippets %}
  {% capture content_for_header %}
    {{ content_for_header }}
    {{ content.metafields.shogun.json_template_snippets.value['head'][template_suffix] }}
  {% endcapture %}

  {% capture content_for_body %}
    {{ content_for_layout }}
    {{ content.metafields.shogun.json_template_snippets.value['body'][template_suffix] }}
  {% endcapture %}
{% endif %}

{% if content.metafields.shogun.json_template_html_wrapper %}
  {% assign json_template_config = content.metafields.shogun.json_template_html_wrapper.value %}
  {% capture content_for_layout %}
    {{
        json_template_config.html
        | replace: json_template_config.content_for_layout_placeholder, content_for_layout
        | replace: json_template_config.page_variant_id_placeholder, json_template_config.template_suffix_to_variant_id_map[template_suffix]
    }}
  {% endcapture %}
{% endif %}

{% if content.metafields.shogun.json_template_optimizer %}
     {% capture content_for_header %}
        <template id="shogun-variant-head">
          {{ content_for_header }}
        </template>
        <script type="text/javascript">
          {% if customer %}
            window.SHG_CUSTOMER = { "id": "{{ customer.id }}" }
          {% else %}
            window.SHG_CUSTOMER = null;
          {% endif %}
        </script>
        {{ content.metafields.shogun.json_template_optimizer.value['head'] }}
     {% endcapture %}

     {% capture content_for_layout %}
        <template id="shogun-variant-body">
          {{ content_for_layout }}
        </template>
        {{ content.metafields.shogun.json_template_optimizer.value['body'] }}
     {% endcapture %}
{% endif %}

